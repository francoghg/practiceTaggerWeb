(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"8j+T":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}(i("Xljc"))},Dzuf:function(t,e,i){"use strict";i.r(e),i.d(e,"TaggerModule",function(){return Bt});var n=i("ofXK"),r=i("tyNb");function s(t,e,i,n){return new(i||(i=Promise))(function(r,s){function o(t){try{h(n.next(t))}catch(e){s(e)}}function a(t){try{h(n.throw(t))}catch(e){s(e)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,a)}h((n=n.apply(t,e||[])).next())})}function o(t){return new Promise(function(e,i){var n=new XMLHttpRequest;n.open("GET",t),n.onload=function(){200==n.status?e(n.response):i(Error(n.statusText))},n.onerror=function(){i(Error("Network Error"))},n.send()})}function a(t){return(new DOMParser).parseFromString(t,"image/svg+xml").documentElement}class h{constructor(t){this.data=t,this.next=null}toString(){return this.data.toString()}}class l{constructor(){this.head=null}insert(t){if(null==this.head)this.head=new h(t);else{let e=this.head;this.head=new h(t),this.head.next=e}}first(){return null!=this.head?this.head.data:null}remove(){return null!=this.head&&(this.head=this.head.next,!0)}toString(){let t=this.head,e="";for(;null!=t;)e+=t.toString()+" ",t=t.next;return e.substr(0,e.length-1)}[Symbol.iterator](){let t=this.head;return{next(){if(null==t)return{done:!0,value:void 0};{let e=t.data;return t=t.next,{done:!1,value:e}}}}}}class c{constructor(){this.relationships=new Map,this._size=0}add(t){this.contains(t)||(this.relationships.set(t,new Set),this._size++)}contains(t){return this.relationships.has(t)}remove(t){this.relationships.delete(t)&&this._size--}size(){return this._size}addDependency(t,e){this.add(t),this.add(e),this.relationships.get(t).add(e),this.traverse(t,t)}traverse(t,e,i=new Set){i.add(t);let n=this.getDependents(t,!0);for(let r of n){if(r==e)throw new Error("circular dependency");i.has(r)||this.traverse(r,e,i)}}hasDependents(t){return this.contains(t)&&0!=this.relationships.get(t).size}getAdjacentNodes(t){return this.relationships.get(t)}getDependents(t,e=!1){if(!this.relationships.has(t))return[];if(e)return this.relationships.get(t).keys();{let e=this.getTopologicalDependents(t);return e.remove(),e}}getTopologicalSort(){let t=new l,e=new Set;for(let i of this.getNodes())e.has(i)||this.getTopologicalDependents(i,e,t);return t}getTopologicalDependents(t,e=new Set,i=new l){e.add(t);let n=this.getDependents(t,!0);for(let r of n)e.has(r)||this.getTopologicalDependents(r,e,i);return i.insert(t),i}getNodes(){return this.relationships.keys()}toString(){let t="";for(let e of this.getNodes())for(let i of this.getDependents(e,!0))t+=e.toString()+"->"+i.toString()+"\n";return t}static Generate(t){let e=new c,i=0,n=t.indexOf("->",i);for(;n>0;){let r=t.substring(i,n);i=n+1,n=t.indexOf("\n",n);let s=t.substring(i+1,n);e.addDependency(r,s),i=n+1,n=t.indexOf("->",i)}return e}}class d{constructor(){this._id=`${this.constructor.name.toLowerCase()}-${d.count++}`,d.controller.add(this)}static clear(t=!1){d.count=0,d.controller.clear(),d.disable=t}get id(){return this._id}remove(){d.controller.remove(this)}addDependency(...t){for(let e of t)d.controller.dependencyGraph.addDependency(e,this)}updateDependents(){d.controller.update(this)}}d.disable=!1,d.controller=new class{constructor(){this.dependencyGraph=new c,this.elements=new Map}clear(){this.dependencyGraph=new c,this.elements.clear()}add(t){this.dependencyGraph.add(t),this.elements.set(t.id,t)}remove(t){this.dependencyGraph.remove(t),this.elements.delete(t.id)}get(t){return this.elements.get(t)}update(t){let e=this.dependencyGraph.getDependents(t);for(let i of e)i.update()}},d.count=0;class u extends d{constructor(t){super(),this.root=t,this.root.id=this.id,this.root.classList.add(this.constructor.name.toLowerCase()),this.style=this.root.style,this.classList=this.root.classList}setAttribute(t,e){return this.root.setAttribute(t,e),this}getAttribute(t){return this.root.getAttribute(t)}appendChild(t){return this.root.appendChild(t.root),t}prependChild(t){return this.root.prepend(t.root),t}contains(t){return this.root.contains(t.root)}remove(){d.controller.remove(this),this.root.remove()}clear(){let t;for(;t=this.root.firstChild;)d.controller.get(t.id).remove()}getBoundingBox(){return this.root instanceof SVGGraphicsElement?this.root.getBBox():null}}class p extends u{constructor(t){let e=document.createElementNS("http://www.w3.org/2000/svg","a");e.setAttributeNS(null,"href",t),super(e)}setAttribute(t,e){return this.root.setAttribute(t,e),this}getAttribute(t){return this.root.getAttribute(t)}}class g extends u{constructor(t){super(t)}setAttribute(t,e){return this.root.setAttribute(t,e),this}getAttribute(t){return this.root.getAttribute(t)}getPointAtLength(t){return this.root.getPointAtLength(t)}getTotalLength(){return this.root.getTotalLength()}isPointInFill(t){return this.root.isPointInFill(t)}isPointInStroke(t){return this.root.isPointInStroke(t)}}class m extends g{constructor(t,e,i){let n=document.createElementNS("http://www.w3.org/2000/svg","circle");n.setAttributeNS(null,"cx",t.toString()),n.setAttributeNS(null,"cy",e.toString()),n.setAttributeNS(null,"r",i.toString()),super(n)}get r(){return this.root.r.baseVal.value}set r(t){this.root.r.baseVal.value=t}get cx(){return this.root.cx.baseVal.value}set cx(t){this.root.cx.baseVal.value=t}get cy(){return this.root.cy.baseVal.value}set cy(t){this.root.cy.baseVal.value=t}getPath(){throw new Error("Method not implemented.")}translate(t,e){this.root.cx.baseVal.value=this.root.cx.baseVal.value+t,this.root.cy.baseVal.value=this.root.cy.baseVal.value+e}get fill(){return this.root.style.fill}set fill(t){this.root.style.fill=t}get stroke(){return this.root.style.stroke}set stroke(t){this.root.style.stroke=t}}class f extends g{constructor(t,e,i,n){let r=document.createElementNS("http://www.w3.org/2000/svg","ellipse");r.setAttributeNS(null,"cx",t.toString()),r.setAttributeNS(null,"cy",e.toString()),r.setAttributeNS(null,"rx",i.toString()),r.setAttributeNS(null,"ry",n.toString()),super(r)}get cx(){return this.root.cx.baseVal.value}set cx(t){this.root.cx.baseVal.value=t}get cy(){return this.root.cy.baseVal.value}set cy(t){this.root.cy.baseVal.value=t}get rx(){return this.root.rx.baseVal.value}set rx(t){this.root.rx.baseVal.value=t}get ry(){return this.root.ry.baseVal.value}set ry(t){this.root.ry.baseVal.value=t}translate(t,e){this.root.cx.baseVal.value=this.root.cx.baseVal.value+t,this.root.cy.baseVal.value=this.root.cy.baseVal.value+e}get fill(){return this.root.style.fill}set fill(t){this.root.style.fill=t}get stroke(){return this.root.style.stroke}set stroke(t){this.root.style.stroke=t}}class y extends g{constructor(t,e,i,n){let r=document.createElementNS("http://www.w3.org/2000/svg","line");r.setAttributeNS(null,"x1",t.toString()),r.setAttributeNS(null,"y1",e.toString()),r.setAttributeNS(null,"x2",i.toString()),r.setAttributeNS(null,"y2",n.toString()),super(r)}get x1(){return this.root.x1.baseVal.value}set x1(t){this.root.x1.baseVal.value=t}get y1(){return this.root.y1.baseVal.value}set y1(t){this.root.y1.baseVal.value=t}get x2(){return this.root.x2.baseVal.value}set x2(t){this.root.x2.baseVal.value=t}get y2(){return this.root.y2.baseVal.value}set y2(t){this.root.y2.baseVal.value=t}translate(t,e){this.root.x1.baseVal.value+=t,this.root.y1.baseVal.value+=e,this.root.x2.baseVal.value+=t,this.root.y2.baseVal.value+=e}get fill(){return this.root.style.fill}set fill(t){this.root.style.fill=t}get stroke(){return this.root.style.stroke}set stroke(t){this.root.style.stroke=t}}class v extends g{constructor(t,e,i,n){let r=document.createElementNS("http://www.w3.org/2000/svg","rect");r.setAttributeNS(null,"x",t.toString()),r.setAttributeNS(null,"y",e.toString()),r.setAttributeNS(null,"width",i.toString()),r.setAttributeNS(null,"height",n.toString()),super(r)}setAttribute(t,e){return this.root.setAttribute(t,e),this}getAttribute(t){return this.root.getAttribute(t)}get x(){return this.root.x.baseVal.value}set x(t){this.root.x.baseVal.value=t}get y(){return this.root.y.baseVal.value}set y(t){this.root.y.baseVal.value=t}get width(){return this.root.width.baseVal.value}set width(t){this.root.width.baseVal.value=t}get height(){return this.root.height.baseVal.value}set height(t){this.root.height.baseVal.value=t}translate(t,e){this.root.x.baseVal.value=this.root.x.baseVal.value+t,this.root.y.baseVal.value=this.root.y.baseVal.value+e}get fill(){return this.root.style.fill}set fill(t){this.root.style.fill=t}get stroke(){return this.root.style.stroke}set stroke(t){this.root.style.stroke=t}}class b extends g{constructor(t){let e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d",t),super(e)}get d(){return this.root.getAttribute("d")}set d(t){this.root.setAttribute("d",t)}static getPath(t){throw Error("Not Implemented")}}class w extends g{constructor(t){let e=document.createElementNS("http://www.w3.org/2000/svg","polygon");e.setAttributeNS(null,"points",t),super(e)}get points(){return this.root.getAttribute("points")}}class x extends u{constructor(){super(document.createElementNS("http://www.w3.org/2000/svg","desc"))}}class _ extends u{constructor(){super(document.createElementNS("http://www.w3.org/2000/svg","metadata"))}}class C extends u{constructor(){super(document.createElementNS("http://www.w3.org/2000/svg","title"))}}class S extends u{constructor(){super(document.createElementNS("http://www.w3.org/2000/svg","clipPath"))}circle(t,e,i){return this.appendChild(new m(t,e,i))}ellipse(t,e,i,n){return this.appendChild(new f(t,e,i,n))}line(t,e,i,n){return this.appendChild(new y(t,e,i,n))}path(t){return this.appendChild(new b(t))}polygon(t){return this.appendChild(new w(t))}rectangle(t,e,i,n){return this.appendChild(new v(t,e,i,n))}description(){return this.appendChild(new x)}metadata(){return this.appendChild(new _)}title(){return this.appendChild(new C)}}class E extends u{constructor(){super(document.createElementNS("http://www.w3.org/2000/svg","defs"))}}class k extends u{constructor(){super(document.createElementNS("http://www.w3.org/2000/svg","symbol"))}get x(){throw new Error("Not Implemented")}set x(t){throw new Error("Not Implemented")}get y(){throw new Error("Not Implemented")}set y(t){throw new Error("Not Implemented")}get width(){throw new Error("Not Implemented")}set width(t){throw new Error("Not Implemented")}get height(){throw new Error("Not Implemented")}set height(t){throw new Error("Not Implemented")}get preserveAspectRatio(){throw new Error("Not Implemented")}set preserveAspectRatio(t){throw new Error("Not Implemented")}get viewBox(){return this.root.getAttribute("viewBox")}set viewBox(t){this.root.setAttributeNS(null,"viewBox",t)}get refX(){throw new Error("Not Implemented")}set refX(t){throw new Error("Not Implemented")}get refY(){throw new Error("Not Implemented")}set refY(t){throw new Error("Not Implemented")}}class M extends u{constructor(t){let e=document.createElementNS("http://www.w3.org/2000/svg","tspan");e.innerHTML=t,super(e)}get text(){return this.root.innerHTML}set text(t){this.root.innerHTML=t}setAttribute(t,e){return this.root.setAttribute(t,e),this}getAttribute(t){return this.root.getAttribute(t)}tspan(t){let e=new M(t);return this.root.appendChild(e.root),e}}class I extends u{constructor(t,e,i=""){let n=document.createElementNS("http://www.w3.org/2000/svg","text");n.setAttributeNS(null,"x",t.toString()),n.setAttributeNS(null,"y",e.toString()),null!=i&&(n.innerHTML=i),super(n)}setAttribute(t,e){return this.root.setAttribute(t,e),this}getAttribute(t){return this.root.getAttribute(t)}set contents(t){this.root.innerHTML=t}get contents(){return this.root.innerHTML}get x(){return Number(this.root.getAttribute("x"))}get y(){return Number(this.root.getAttribute("y"))}set x(t){this.root.setAttribute("x",t.toString())}set y(t){this.root.setAttribute("y",t.toString())}get length(){return document.createElement("canvas").getContext("2d").measureText(this.root.innerHTML).width}text(t,e,i){let n=new I(t,e,i);return this.root.appendChild(n.root),n}tspan(t){let e=new M(t);return this.root.appendChild(e.root),e}}class A extends u{constructor(t,e,i,n){let r=document.createElementNS("http://www.w3.org/2000/svg","use");r.setAttributeNS(null,"x",t.toString()),r.setAttributeNS(null,"y",e.toString()),r.setAttributeNS(null,"width",i.toString()),r.setAttributeNS(null,"height",n.toString()),super(r)}get href(){return this.root.href.baseVal}set href(t){this.root.href.baseVal=t}get x(){return this.root.x.baseVal.value}set x(t){this.root.x.baseVal.value=t}get y(){return this.root.y.baseVal.value}set y(t){this.root.y.baseVal.value=t}get width(){return this.root.width.baseVal.value}set width(t){this.root.width.baseVal.value=t}get height(){return this.root.height.baseVal.value}set height(t){this.root.height.baseVal.value=t}}class O extends u{constructor(t,e,i,n){let r=document.createElementNS("http://www.w3.org/2000/svg","marker");r.setAttributeNS(null,"refX",t.toString()),r.setAttributeNS(null,"refY",e.toString()),r.setAttributeNS(null,"markerWidth",i.toString()),r.setAttributeNS(null,"markerHeight",n.toString()),super(r)}setAttribute(t,e){return this.root.setAttribute(t,e),this}getAttribute(t){return this.root.getAttribute(t)}get viewBox(){return this.getAttribute("viewBox")}set viewBox(t){this.setAttribute("viewBox",t)}get refX(){return this.root.refX.baseVal.value}set refX(t){this.root.refX.baseVal.value=t}get refY(){return this.root.refY.baseVal.value}set refY(t){this.root.refY.baseVal.value=t}get width(){return this.root.markerWidth.baseVal.value}set width(t){this.root.markerWidth.baseVal.value=t}get height(){return this.root.markerHeight.baseVal.value}set height(t){this.root.markerHeight.baseVal.value=t}description(){return this.appendChild(new E)}metadata(){return this.appendChild(new _)}title(){return this.appendChild(new C)}defs(){return this.appendChild(new E)}group(){return this.appendChild(new T)}svg(){return this.appendChild(new L)}symbol(){return this.appendChild(new k)}use(t,e,i,n){return this.appendChild(new A(t,e,i,n))}circle(t,e,i){return this.appendChild(new m(t,e,i))}ellipse(t,e,i,n){return this.appendChild(new f(t,e,i,n))}line(t,e,i,n){return this.appendChild(new y(t,e,i,n))}path(t){return this.appendChild(new b(t))}polygon(t){return this.appendChild(new w(t))}rectangle(t,e,i,n){return this.appendChild(new v(t,e,i,n))}text(t,e,i){return this.appendChild(new I(t,e,i))}}class P extends u{constructor(){super(document.createElementNS("http://www.w3.org/2000/svg","script"))}setAttribute(t,e){return this.root.setAttribute(t,e),this}getAttribute(t){return this.root.getAttribute(t)}}class L extends u{constructor(t,e,i,n){let r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("xmlns","http://www.w3.org/2000/svg"),t&&r.setAttributeNS(null,"x",t.toString()),e&&r.setAttributeNS(null,"y",e.toString()),i&&r.setAttributeNS(null,"width",i.toString()),n&&r.setAttributeNS(null,"height",n.toString()),super(r)}static SVG(t,e,i,n,r){let s;if("string"==typeof t){if(s=document.getElementById(t),null==s)throw new Error("There is no HTML element with the id: "+t)}else s=t;let o=new L(e,i,n,r);return s.appendChild(o.root),o}get width(){return parseInt(this.root.getAttribute("width"))}set width(t){this.root.setAttributeNS(null,"width",t.toString())}get height(){return parseInt(this.root.getAttribute("height"))}set height(t){this.root.setAttributeNS(null,"height",t.toString())}get x(){return this.root.x.baseVal.value}set x(t){this.root.x.baseVal.value=t}get y(){return this.root.y.baseVal.value}set y(t){this.root.y.baseVal.value=t}get viewBox(){return this.root.getAttribute("viewBox")}set viewBox(t){this.root.setAttribute("viewBox",t)}setViewBox(t,e,i,n){this.viewBox=`${t} ${e} ${i} ${n}`}setAttribute(t,e){return this.root.setAttribute(t,e),this}getAttribute(t){return this.root.getAttribute(t)}description(){return this.appendChild(new x)}metadata(){return this.appendChild(new _)}title(){return this.appendChild(new C)}circle(t,e,i){return this.appendChild(new m(t,e,i))}ellipse(t,e,i,n){return this.appendChild(new f(t,e,i,n))}line(t,e,i,n){return this.appendChild(new y(t,e,i,n))}path(t){return this.appendChild(new b(t))}polygon(t){return this.appendChild(new w(t))}rectangle(t,e,i,n){return this.appendChild(new v(t,e,i,n))}defs(){return this.appendChild(new E)}group(){return this.appendChild(new T)}svg(t,e,i,n){return this.appendChild(new L(t,e,i,n))}symbol(){return this.appendChild(new k)}use(t,e,i,n){return this.appendChild(new A(t,e,i,n))}text(t,e,i){return this.appendChild(new I(t,e,i))}a(t){return this.appendChild(new p(t))}clipPath(){return this.appendChild(new S)}marker(t,e,i,n){return this.appendChild(new O(t,e,i,n))}script(){return this.appendChild(new P)}}class T extends u{constructor(){super(document.createElementNS("http://www.w3.org/2000/svg","g"))}setAttribute(t,e){return this.root.setAttribute(t,e),this}getAttribute(t){return this.root.getAttribute(t)}description(){return this.appendChild(new x)}metadata(){return this.appendChild(new _)}title(){return this.appendChild(new C)}defs(){return this.appendChild(new E)}group(){return this.appendChild(new T)}svg(t,e,i,n){return this.appendChild(new L(t,e,i,n))}symbol(){return this.appendChild(new k)}use(t,e,i,n){return this.appendChild(new A(t,e,i,n))}circle(t,e,i){return this.appendChild(new m(t,e,i))}ellipse(t,e,i,n){return this.appendChild(new f(t,e,i,n))}line(t,e,i,n){return this.appendChild(new y(t,e,i,n))}path(t){return this.appendChild(new b(t))}polygon(t){return this.appendChild(new w(t))}rectangle(t,e,i,n){return this.appendChild(new v(t,e,i,n))}text(t,e,i){return this.appendChild(new I(t,e,i))}a(t){return this.appendChild(new p(t))}clipPath(){return this.appendChild(new S)}}class B extends T{constructor(){super();let t=this;t._onchange=function(){t.updateDependents()}}set onchange(t){this._onchange=t}get onchange(){return this._onchange}}class D extends A{constructor(t,e,i,n){super(t,e,i,n),this.classList.add("icon")}}class N extends B{constructor(t,e,i){super(),this._count=0,this._x=t,this._y=e,this._active=!1,this.root.setAttribute("transform",`translate(${t},${e})`),this.root.classList.add("button"),this.label=new I(0,1,i),this.label.root.setAttribute("alignment-baseline","middle"),this.label.root.style.textAnchor="middle",this.box=this.rectangle(0,-16,2*this.label.length+16,32),this.box.root.setAttribute("rx","2px"),this.label.x=this.box.x+this.box.width/2,this.appendChild(this.label);let n=this;this.root.onmousedown=()=>{n.active=!this.active},this.root.onmouseup=()=>{n.active=!this.active}}get x(){return this._x}set x(t){this._x=t,this.root.setAttribute("transform",`translate(${this._x},${this._y})`)}get y(){return this._y}set y(t){this._y=t,this.root.setAttribute("transform",`translate(${this._x},${this._y})`)}get count(){return this._count}get active(){return this._active}set active(t){this.active&&!t&&this._count++,this._active=t,this._active?(this.box.style.fill="#f8f8f8",this.box.style.stroke="#333333",this.box.style.strokeWidth="1px",this.label.style.fill="#404040"):(this.box.style.fill="",this.label.style.fill=""),this.onchange()}set onclick(t){this.root.onclick=t,this.onchange()}}class F extends B{constructor(t,e,i,n){super(),this._value=!1,this.root.setAttribute("transform",`translate(${t},${e})`),this.box=new v(-6.5,-6.5,13,13),this.box.root.setAttribute("rx","2px"),this.label=new I(18,1,i),this.label.root.setAttribute("alignment-baseline","middle"),this.root.appendChild(this.box.root),this.root.appendChild(this.label.root);let r=this;this.value=n,this.box.root.onmousedown=function(){r.toggle()},this.addDependency(this.box)}set value(t){this.box.style.fill=(this._value=t)?"#404040":"",this.onchange()}get value(){return this._value}number(){return this.value?1:0}toggle(){this.value=!this.value}}class U extends B{constructor(t,e){super(),this.constrain=function(t,e){return e},this.point=this.circle(0,0,U.pointRadius),this.handle=this.circle(0,0,U.handleRadius),this.point.classList.add("point"),this.handle.classList.add("handle"),this.root.classList.add("control"),this._x=t,this._y=e,this._dx=0,this._dy=0,this.update=()=>{},this.translate(t,e),this.root.onmousedown=this.handleMouseDown.bind(this),this.handle.root.onmouseout=this.handleMouseOut.bind(this),this.handle.root.addEventListener("touchstart",this.handleTouchStart.bind(this),{passive:!1}),U.initalized||(window.onmouseover=U.handleMouseOver,window.onmousemove=U.handleMouseMove,window.onmouseup=U.handleInputEnd,window.addEventListener("touchend",U.handleInputEnd,{passive:!1}),window.addEventListener("touchmove",U.handleTouchMove,{passive:!1}),U.initalized=!0)}static handleMouseMove(t){null!=U.active&&(U.handleMoveTo(t.clientX,t.clientY),t.preventDefault())}static handleTouchMove(t){null!=U.active&&(U.handleMoveTo(t.touches[0].clientX,t.touches[0].clientY),t.preventDefault())}static handleMoveTo(t,e){U.active.translate(t+U.slopX,e+U.slopY)}static handleInputEnd(t){null!=U.active&&(U.active.handle.root.classList.remove("highlight"),U.active=null,"touchend"!=t.type&&t.target.dispatchEvent(new MouseEvent("mouseover",{view:window,bubbles:!0,cancelable:!0})))}static handleMouseOver(t){null!=U.active||d.disable||"circle"!=t.target.tagName||t.target.classList.add("highlight")}handleMouseOut(t){null==U.active&&t.target.classList.remove("highlight")}handleMouseDown(t){d.disable||(t.preventDefault(),t.stopPropagation(),U.active=this,U.slopX=U.active.x-t.clientX,U.slopY=U.active.y-t.clientY,U.prevX=t.clientX,U.prevY=t.clientY)}handleTouchStart(t){d.disable||(U.active=this,U.slopX=U.active.x-t.touches[0].clientX,U.slopY=U.active.y-t.touches[0].clientY,t.preventDefault())}translate(t,e){let i=this.constrain({x:this.x,y:this.y},{x:t,y:e});this._dx=i.x-this._x,this._dy=i.y-this._y,this._x=i.x,this._y=i.y,this.root.setAttribute("transform",`translate( ${this.x}, ${this.y})`),this.onchange()}set x(t){this._dx=t-this.x,this._x=t,this.root.setAttribute("transform","translate( "+this.x+", "+this.y+")")}set y(t){this._dy=t-this.y,this._y=t,this.root.setAttribute("transform","translate( "+this.x+", "+this.y+")")}get x(){return this._x}get y(){return this._y}get dx(){return this._dx}get dy(){return this._dy}constrainTo(t){if(this.addDependency(t),t instanceof b)throw Error("not implemented");t instanceof m?this.constrain=function(e,i){let n=Math.atan2(i.y-t.cy,i.x-t.cx);return{x:t.r*Math.cos(n)+t.cx,y:t.r*Math.sin(n)+t.cy}}:t instanceof v&&(this.constrain=function(e,i){let n=i.x,r=i.y,s=t.x,o=t.y,a=t.x+t.width,h=t.y+t.height;return r>=h&&n>=a?(r=h,n=a):r<=o&&n<=s?(r=o,n=o):r<=o&&n>=a?(r=o,n=a):r>=h&&n<=s?(r=h,n=s):n>s&&n<a?r=r>t.y+t.height/2?h:o:n=n>t.x+t.width/2?a:s,{x:n,y:r}})}constrainWithin(t){if(this.addDependency(t),t instanceof b)throw Error("not implemented");t instanceof m?this.constrain=function(e,i){if(Math.hypot(i.y-t.cy,i.x-t.cx)>t.r){let e=Math.atan2(i.y-t.cy,i.x-t.cx);return{x:t.r*Math.cos(e)+t.cx,y:t.r*Math.sin(e)+t.cy}}return i}:t instanceof v&&(this.constrain=function(e,i){let n=i.x,r=i.y,s=t.x,o=t.y,a=t.x+t.width,h=t.y+t.height;return n<s&&(n=s),r<o&&(r=o),n>a&&(n=a),r>h&&(r=h),{x:n,y:r}})}constrainToCircle(t,e,i){this.constrain=function(n,r){let s=Math.atan2(r.y-e,r.x-t);return{x:i*Math.cos(s)+t,y:i*Math.sin(s)+e}}}constrainWithinBox(t,e,i,n){this.constrain=function(r,s){let o=s.x,a=s.y;return o<t&&(o=t),a<e&&(a=e),o>i&&(o=i),a>n&&(a=n),{x:o,y:a}}}constrainWithinRange(t,e){this.constrain=function(i,n){let r=n.x;return r<t&&(r=t),r>e&&(r=e),{x:r,y:n.y}}}constrainToX(t=-1/0,e=1/0){this.constrain=function(t,e){return{x:e.x,y:t.y}}}constrainToY(){this.constrain=function(t,e){return{x:t.x,y:e.y}}}}U.pointRadius=4,U.handleRadius=13,U.active=null,U.slopX=0,U.slopY=0,U.prevX=0,U.prevY=0,U.initalized=!1;class V extends U{constructor(t,e){super(t,e),this.point.r=V.circleRadius,this.handle.r=V.circleRadius+.8,this.handle.style.strokeWidth="2",this.point.style.fill=this.handle.style.stroke}}V.circleRadius=10;class R extends B{constructor(t,e,i,n=0){if(void 0===i||0==i.length)throw new Error("Labels must not be empty");super(),this.root.setAttribute("transform",`translate(${t},${e})`),this.index=n;let r=0;this.list=[];let s=this;i.forEach((t,e)=>{let i=new F(0,r,t,!1);e==n&&(i.value=!0),i.box.root.setAttribute("rx","8px"),i.box.root.onmousedown=function(){s.handleMouseDown(e),i.value=!0,s.index=e,s.onchange()},this.root.appendChild(i.root),this.list.push(i),r+=24})}get value(){return this.list[this.index].label.contents}getCurrentValue(){return this.list[this.index].label}handleMouseDown(t){this.list.forEach(t=>{t.value=!1})}}class X extends B{constructor(t,e,i,n){if(void 0===i||0===i.length)throw new Error("Dropdown control must have at least one option");if(n<0||n>=i.length)throw new Error("Default index must be within bounds of option labels array.");super(),this.optionLabels=i,this.currentIndex=n,this.expanded=!1,this.textWidth=new I(0,0,this.getLongestString(i)).length,this.x=t,this.y=e,this.collapsedView=new T,this.collapsedView.setAttribute("transform",`translate(${this.x},${this.y})`),this.currSelection=new T,this.currSelection.root.classList.add("dropdown-control-curr-selection-box"),this.currSelectionText=new I(0,1,this.optionLabels[this.currentIndex]),this.currSelectionText.root.setAttribute("alignment-baseline","middle"),this.currSelectionText.style.textAnchor="middle",this.currSelectionBox=new v(0,-16,3*this.textWidth+16,32),this.currSelectionText.x=this.currSelectionBox.x+this.currSelectionBox.width/2,this.currSelection.appendChild(this.currSelectionBox),this.currSelection.appendChild(this.currSelectionText);let r=new T;r.root.classList.add("dropdown-control-button");let s=new v(3*this.textWidth+16,-16,32,32),o=new b(` M ${8+3*this.textWidth+32} ${8*Math.sin(-2*Math.PI/3)+1}\n                                 L ${8*Math.cos(-2*Math.PI/3)+3*this.textWidth+28} ${8*Math.sin(-2*Math.PI/3)+1}\n                                 L ${(8+3*this.textWidth+32+8*Math.cos(-2*Math.PI/3)+3*this.textWidth+28)/2} ${8*Math.sin(-4*Math.PI/3)+1}\n                                 Z`);o.style.fill="#333333",r.appendChild(s),r.appendChild(o);let a=this;r.root.onmousedown=function(){a.expanded?(a.root.removeChild(a.expandedView.root),a.expanded=!1):(a.updateExpandedView(),a.root.appendChild(a.expandedView.root),a.expanded=!0),a.onchange()},this.collapsedView.appendChild(this.currSelection),this.collapsedView.appendChild(r),this.root=this.collapsedView.root,this.root.id=this.id}get value(){return this.optionLabels[this.currentIndex]}updateExpandedView(){this.expandedView=new T,this.collapsedView.setAttribute("transform",`translate(${this.x},${this.y})`);let t=new T;t.root.classList.add("dropdown-control-menu-option");let e=new I(0,1,this.optionLabels[this.currentIndex]);e.root.setAttribute("alignment-baseline","middle"),e.style.textAnchor="middle";let i=new v(0,-16,3*this.textWidth+16,32);e.x=i.x+i.width/2,t.appendChild(i),t.appendChild(e),this.expandedView.appendChild(t);let n=this,r=32;this.optionLabels.forEach((t,e)=>{if(e==this.currentIndex)return;let i=new T;i.root.classList.add("dropdown-control-menu-option");let s=new I(0,1+r,t);s.root.setAttribute("alignment-baseline","middle"),s.style.textAnchor="middle";let o=new v(0,-16+r,3*this.textWidth+16,32);s.x=o.x+o.width/2,i.appendChild(o),i.appendChild(s),i.root.onmousedown=function(){n.root.removeChild(n.expandedView.root),n.expanded=!1,n.currentIndex=e,n.currSelectionText.contents=t,n.onchange()},this.expandedView.appendChild(i),r+=32})}getCurrentSelection(){return this.optionLabels[this.currentIndex]}getLongestString(t){if(0==t.length)return"";let e=t[0];for(let i=1;i<t.length;i++)t[i].length>e.length&&(e=t[i]);return e}}class Y extends B{constructor(t,e,i){let n,r;super(),this.x=t,this.y=e,n=i.width?i.width:100,r=i.value?i.value:0,this._min=i.min?i.min:0,this._max=i.max?i.max:1,this._line=this.line(t,e,t+n,e),this._line.root.style.strokeWidth="1.5",this._line.root.style.strokeLinecap="round",this._control=new V(t+r,e),this._control.constrainWithinBox(t,e,t+n,e),this._control.point.r-=1.5,this._control.handle.r-=2,this._control.handle.style.strokeWidth="2",this.appendChild(this._control),this.value=r;let s=this,o=s._control.onchange;s._control.onchange=function(){o(),s.onchange()}}get width(){return this._line.x2-this._line.x1}set width(t){this._line.x2=this._line.x1+t,this._control.constrainWithinBox(this._line.x1,this._line.y1,this._line.x2,this._line.y2)}get value(){return(this._control.x-this._line.x1)/this.width*this.range+this._min}set value(t){this._control.x=this._line.x1+(t-this._min)/this.range*this.width}set step(t){let e=this._line;this._control.constrain=function(t,i){let n=i.x,r=i.y;return n<e.x1&&(n=e.x1),r<e.y1&&(r=e.y1),n>e.x2&&(n=e.x2),r>e.y2&&(r=e.y2),n=50*Math.floor(n/50),{x:n,y:r}}}get min(){return this._min}set min(t){this._min=t}get max(){return this._max}set max(t){this._max=t}get range(){return this.max-this.min}}class z extends Y{constructor(t,e,i){let n=Object.assign(Object.assign({},{width:486}),i);n.width=n.width-80,super(t+80,e,n),this.active=!1,this.loop=!1,this.done=!1;let r=this.circle(0,0,16);r.style.fill="#eeeeee",r.style.stroke="#333333",r.style.strokeWidth="1px";let s=this.path(` M 8 0\n                                  L ${8*Math.cos(-2*Math.PI/3)} ${8*Math.sin(-2*Math.PI/3)}\n                                  L ${8*Math.cos(-4*Math.PI/3)} ${8*Math.sin(-4*Math.PI/3)}\n                                  Z`);s.style.fill="#333333",this.playButton=this.group(),this.playButton.appendChild(r),this.playButton.appendChild(s),this.playButton.setAttribute("transform",`translate( ${t}, ${e})`);let o=this.circle(0,0,16);o.style.fill="#eeeeee",o.style.stroke="#333333",o.style.strokeWidth="1px";let a=this.path(" M -3.5 -5\n                                L -3.5 5\n                                M 3.5 -5\n                                L 3.5 5");a.style.stroke="#333333",a.style.strokeWidth="2",a.style.strokeLinecap="round",this.pauseButton=this.group(),this.pauseButton.appendChild(o),this.pauseButton.appendChild(a),this.pauseButton.setAttribute("transform",`translate( ${t+42}, ${e})`);let h=this;this.playButton.root.addEventListener("click",function(){h.play()}),this.pauseButton.root.addEventListener("click",function(){h.pause()});let l=this.onchange;this.onchange=function(){h.done=h.value==h.max,l()}}play(){if(!this.active){let t=this;t.active=!0,this.done&&(this.value=this.min,this.done=!1);let e=.0025*t.range,i=function(n){t.value=t.value+e,t.value>t.max&&!t.loop?(t.value=t.max,t.pause(),t.done=!0,t.onchange()):(t.value=t.value%t.max,t.onchange(),t.requestID=window.requestAnimationFrame(i))};window.requestAnimationFrame(i)}}pause(){this.active=!1,window.cancelAnimationFrame(this.requestID)}}class $ extends B{constructor(t){super(),this._xBound=null,this._yBound=null,this.label=new I(0,1,t),this.label.root.setAttribute("alignment-baseline","middle"),this.label.root.style.textAnchor="middle",this.box=this.rectangle(0,-16,2*this.label.length+16,32),this.box.root.setAttribute("rx","2px"),this.box.fill="white",this.box.stroke="black",this.box.style.fillOpacity="0.9",this.label.x=this.box.x+this.box.width/2,this.appendChild(this.label),this._x=this.box.x,this._y=this.box.y,this.root.setAttribute("visibility","hidden")}set x(t){this._xBound&&t>=this._xBound-this.box.width&&(t=this._xBound-this.box.width),this._x=t,this.box.x=this._x,this.label.x=this.box.x+this.box.width/2}set y(t){this._yBound&&(t>=this._yBound-this.box.height?t=this._yBound-this.box.height:t<=this.box.height&&(t=this.box.height)),this._y=t,this.box.y=this._y-37,this.label.y=this.box.y+this.box.height/2}setBounds(t,e){this._xBound=t,this._yBound=e}setText(t){this.label.contents=t,this.label.x=this.box.x+this.box.width/2,this.label.y=this.box.y+this.box.height/2,this.box.width=2*this.label.length+16}updatePosition(t,e){this.x=t,this.y=e}showHoverBox(){this.root.removeAttribute("visibility")}hideHoverBox(){this.root.setAttribute("visibility","hidden")}}class G extends T{constructor(t,e,i,n,r){super(),this.depth=0,this._cx=t,this._cy=e,this._text=r,this._rx=i,this._ry=n,this.edges=new Set,this.nodeName=new I(t,e,r),this.nodeName.style.textAnchor="middle",this.nodeName.root.setAttribute("alignment-baseline","middle"),this.nodeEllipse=new f(t,e,i,n),this.nodeEllipse.fill="#f8f8f8",this.children=[],this.parents=[],this.root.appendChild(this.nodeEllipse.root),this.root.appendChild(this.nodeName.root)}edgeWeight(){return this.edges.size}translate(t,e){this.nodeEllipse.cx+=t,this.nodeName.x+=t,this._cx+=t,this.nodeEllipse.cy+=e,this.nodeName.y+=e,this._cy+=e}get cx(){return this._cx}get cy(){return this._cy}set cx(t){this._cx=t,this.nodeEllipse.cx=t,this.nodeName.x=t,this.edges.forEach(function(t){t.redraw()})}set cy(t){this._cy=t,this.nodeEllipse.cy=t,this.nodeName.y=t,this.edges.forEach(function(t){t.redraw()})}get rx(){return this._rx}get ry(){return this._ry}get label(){return this._text}set label(t){this.nodeName.contents=t,this._text=t}set rx(t){this._rx=t,this.nodeEllipse.rx=t}set ry(t){this._ry=t,this.nodeEllipse.ry=t}addEdge(t){t.nodeFrom==this?this.children.push(t.nodeTo):(this.depth=t.nodeFrom.depth+1,this.parents.push(t.nodeFrom)),this.edges.add(t)}}class H extends y{constructor(t,e,i){let n=H.calculateLinePosition(t,e);H.calculateLinePositionEllipse(t,e),i&&!Number.isNaN(n[0])?super(n[0],n[1],n[2],n[3]):super(t.cx,t.cy,e.cx,e.cy),this.directed=i,this.nodeFrom=t,this.nodeTo=e}redraw(){this.x1=this.nodeFrom.cx,this.y1=this.nodeFrom.cy,this.x2=this.nodeTo.cx,this.y2=this.nodeTo.cy}static calculateLinePosition(t,e){let i=t.nodeEllipse.cy,n=e.nodeEllipse.cy,r=t.nodeEllipse.cx,s=e.nodeEllipse.cx,o=n-i,a=s-r,h=Math.sqrt(a*a+o*o);return new Array(r+t.nodeEllipse.rx/h*a,i+t.nodeEllipse.rx/h*o,s-e.nodeEllipse.rx/h*a,n-e.nodeEllipse.rx/h*o)}static calculateLinePositionEllipse(t,e){let i=Math.atan((t.cy-e.cy)/(t.cx-e.cx)),n=Math.cos(i),r=Math.sin(i),s=e.cx*e.cy/Math.sqrt(Math.pow(e.cx,2)*Math.pow(n,2)+Math.pow(e.cy,2)*Math.pow(r,2));return Math.sqrt(t.cx*Math.pow(n,2)+t.cy*Math.pow(r,2)),new Array(s*n,s*r)}}class W extends T{constructor(t){super(),this.nodes=[],this.options=t;let e=this.defs();e.root.innerHTML='<marker id="arrow" refX="10" refY="5" markerWidth="10" markerHeight="10" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" style="fill:#333333;"></path></marker>',this.appendChild(e)}clear(){for(var t=0;t<this.nodes.length;t++)this.nodes[t].edges.forEach(function(t){t.remove()}),this.nodes[t].remove();this.nodes=[]}addNode(t,e,i,n=20,r=20){let s=new G(t,e,n,r,i);return this.root.appendChild(s.root),this.nodes.push(s),s}addEdge(t,e){let i=new H(t,e,this.options.directed);return this.options.directed&&i.root.setAttribute("marker-end","url(#arrow)"),this.root.prepend(i.root),t.addEdge(i),e.addEdge(i),i}getNodes(){return this.nodes}size(){return this.nodes.length}tidy(t){let e=[];this.postTraverse(t,e);let i={},n={};for(let r of e)if(n[r.id]=0,r.cx=0,0!=r.children.length){for(let t=1;t<r.children.length;t++)r.children[t].cx=r.children[t-1].cx+100;n[r.id]=(r.children[0].cx+r.children[r.children.length-1].cx)/2}for(let r of e)r.cy=75*r.depth+50,null!=r.parents[0]&&r.parents[0].children[0]!==r?(r.cx=r.parents[0].children[r.parents[0].children.indexOf(r)-1].cx+100,i[r.id]=r.cx-n[r.id]):(r.cx=n[r.id],i[r.id]=0);this.shiftChildrenByMod(t,0,i),i=this.clearModMap(i),i=this.fixConflicts(t,e,i),this.fixOffScreen(t,i),t.cx=(t.children[0].cx+t.children[t.children.length-1].cx)/2}fixOffScreen(t,e){let i={};i=this.leftContour(t,i);let n=0;for(let r in i)i[r]<n&&(n=i[r]);t.cx+=n+50,e[t.id]+=n+50,this.shiftChildrenByMod(t,0,e)}fixConflicts(t,e,i){let n=!1;for(let r of e)if(null!=r.parents[0]&&r.parents[0].children[0]!==r){let e=-1;for(let t=0;t<r.parents[0].children.length;t++)if(r.parents[0].children[t]===r){e=t;break}for(let s=e-1;s>=0&&r.parents[0].children[s]!==r;s--){let e={};e=this.leftContour(r,e);let o={};o=this.rightContour(r.parents[0].children[s],o);let a=this.calculateShift(e,o);0!=a&&(n=!0),r.cx+=a,i[r.id]+=a,this.shiftChildrenByMod(t,0,i),i=this.clearModMap(i);let h=0;for(let t=s;t<r.parents[0].children.length;t++)if(r.parents[0].children[t]===r){h=t;break}for(let t=s+1;t<h;t++)r.parents[0].children[t].cx+=a/(h-s),i[r.parents[0].children[t].id]+=a/(h-s)}}return i}shiftChildrenByMod(t,e,i){t.cx+=e;for(let n of t.children)this.shiftChildrenByMod(n,e+i[t.id],i)}clearModMap(t){for(let e in t)t[e]=0;return t}calculateShift(t,e){let i=0;for(let n in t)void 0!==e[n]&&t[n]-100<e[n]&&(i=Math.abs(t[n]-100-e[n]));return i}leftContour(t,e){(void 0===e[t.depth]||e[t.depth]>t.cx)&&(e[t.depth]=t.cx);for(let i of t.children)e=this.leftContour(i,e);return e}rightContour(t,e){(void 0===e[t.depth]||e[t.depth]<t.cx)&&(e[t.depth]=t.cx);for(let i of t.children)e=this.rightContour(i,e);return e}postTraverse(t,e){return t||console.log("ERROR: Node was null"),t.children.length>0&&t.children.forEach(t=>{this.postTraverse(t,e)}),e.push(t),e}}class j extends L{constructor(t,e,i={}){super(),this.mapOptions=Object.assign(Object.assign({},{fill:"white",stroke:"black",strokeWidth:.5,nonScalingStroke:!0}),i),this.featureName=t,this.externalJSON=e,this.featuresMap=new Map,this.draw(t)}draw(t){this.clearPaths(),this.featureName=""!=t?t:null,this.loadExternalJSON(t),this.featuresMap.forEach(t=>{this.appendChild(t)});let e=this.root.getBBox();this.setViewBox(e.x,e.y,e.width,e.height)}removeFeature(t){this.featuresMap.has(t)&&(this.featuresMap.get(t).remove(),this.featuresMap.delete(t))}clearPaths(){let t=this.root.getElementsByClassName("feature");for(;t.length>0;)t[0].remove();this.featuresMap=new Map}getPathForFeatureName(t){return this.featuresMap.get(t)}getAllFeaturePaths(){return Array.from(this.featuresMap.values())}getHTMLFeatureElements(){return Array.from(this.root.children)}setViewBoxToFeature(t){if(this.featuresMap.has(t)){let e=this.featuresMap.get(t).root.getBBox();this.setViewBox(e.x,e.y,e.width,e.height)}}resetViewBox(){let t=this.root.getBBox();this.setViewBox(t.x,t.y,t.width,t.height)}setupGroup(t){let e=new T;return e.classList.remove("element"),e.root.setAttribute("name",t),e.style.stroke=this.mapOptions.stroke,e.style.fill=this.mapOptions.fill,e.style.strokeWidth=this.mapOptions.strokeWidth.toString(),e.classList.add("feature"),e}loadExternalJSON(t){var e=this.externalJSON,i=null;null!=this.featureName&&(i=t.toLowerCase().split(","));var n=1;try{for(let t=0;t<e.features.length;t++)for(let r=0;r<e.features[t].geometry.coordinates.length;r++){let s=e.features[t].properties.name;if(null!=this.featureName){if(null!=i&&!i.includes(s.toLowerCase()))continue;if(!this.featuresMap.has(s)){let t=this.setupGroup(s);this.featuresMap.set(s,t)}}else if(!this.featuresMap.has(s)){let t=this.setupGroup(s);this.featuresMap.set(s,t)}if(1==e.features[t].geometry.coordinates[r].length){let i=this.featuresMap.get(s).path("M 0 0");for(this.mapOptions.nonScalingStroke&&i.root.setAttribute("vector-effect","non-scaling-stroke"),i.d=`M ${e.features[t].geometry.coordinates[r][0][0][0]} ${-1*e.features[t].geometry.coordinates[r][0][0][1]}  `,n=1;n<e.features[t].geometry.coordinates[r][0].length;n++)i.d+=`L ${e.features[t].geometry.coordinates[r][0][n][0]} ${-1*e.features[t].geometry.coordinates[r][0][n][1]} `}else{let i=this.featuresMap.get(s).path("M 0 0");for(this.mapOptions.nonScalingStroke&&i.root.setAttribute("vector-effect","non-scaling-stroke"),i.d=`M ${e.features[t].geometry.coordinates[r][0][0]} ${-1*e.features[t].geometry.coordinates[r][0][1]} `,n=1;n<e.features[t].geometry.coordinates[r].length;n++)i.d+=`L ${e.features[t].geometry.coordinates[r][n][0]} ${-1*e.features[t].geometry.coordinates[r][n][1]} `}}}catch(r){throw new Error("There was an error processing the provided GeoJSON: "+r)}}onchange(){this.updateDependents()}}function q(t){const e=1e6,i=1e5,n=1e-4,r=1e-5,s=1e-6;return t>=e?e:t>=i?i:t>=1e4?1e4:t>=1e3?1e3:t>=100?100:t>=10?10:t>=1?1:t>=.1?.1:t>=.01?.01:t>=.001?.001:t>=n?n:t>=r?r:t>=s?s:void 0}class K extends L{constructor(t,e){let i=Object.assign(Object.assign({},{x:0,y:0,width:700,height:400,margin:50,scaleX:1,scaleY:1,grid:!0,labels:!0,border:!0,zoomable:!1,displayPoint:!1,controls:!1}),e);super(i.x,i.y,i.width,i.height),this.prevX=0,this.prevY=0,this.active=!1,this._function=t,this._width=i.width-2*i.margin,this._height=i.height-2*i.margin,this._x=-this._width/2,this._y=-this._height/2,this.rect=this.rectangle(i.margin,i.margin,this._width,this._height),this.rect.style.fill="transparent",i.border?this.rect.style.border="1px solid #404040":this.rect.style.stroke="none";let n=this.clipPath();n.rectangle(0,0,this._width,this._height),this.clipGroup=this.group(),this.clipGroup.setAttribute("clip-path",`url(#${n.id})`),this.clipGroup.setAttribute("transform",`translate(${i.margin}, ${i.margin})`),this.viewPort=this.clipGroup.svg(0,0,this._width,this._height),this.viewPort.setAttribute("preserveAspectRatio","none"),this.staticGroup=this.clipGroup.group(),this.xAxis=this.staticGroup.line(-1e4,0,1e4,0),this.yAxis=this.staticGroup.line(0,-1e4,0,1e4),this.staticGroup.circle(0,0,3).fill="#404040",this.scaleX=i.scaleX,this.scaleY=i.scaleY,this.visibleWidth=this._width/this.scaleX,this.visibleHeight=this._height/this.scaleY,this.internalX=-this.visibleWidth/2,this.internalY=-this.visibleHeight/2,this.fPath=this.staticGroup.path(""),this.fPath.setAttribute("transform","scale(1, -1)"),this.setViewBox(),null!=i.originX&&null!=i.originY&&this.setOrigin(i.originX,i.originY),i.grid&&(this.grid=this.viewPort.group(),this.grid.classList.add("grid"),this.grid.style.opacity=".4",this.drawGrid());let r=this;if((void 0===i.displayPoint||i.displayPoint)&&(this.displayCircle=this.staticGroup.circle(0,0,4),this.displayCircle.style.fill="cornflowerblue",this.displayCircle.setAttribute("transform","scale(1, -1)"),this.xRect=this.rectangle(0,0,125,40),this.yRect=this.rectangle(120,0,125,40),this.xRect.root.style.fill="white",this.yRect.root.style.fill="white",this.xText=this.text(15,20,"x:0"),this.xText.root.style.dominantBaseline="middle",this.xText.root.style.whiteSpace="pre",this.yText=this.text(140,20,"y:0"),this.yText.root.style.dominantBaseline="middle",this.yText.root.style.whiteSpace="pre",this.root.addEventListener("mousemove",function(t){r.handleMouseMove(t)})),(void 0===i.zoomable||i.zoomable)&&(this.root.addEventListener("mousedown",function(t){r.handleMouseDown(t)}),this.root.addEventListener("mouseup",function(t){r.handleMouseUp(t)}),this.root.addEventListener("mouseleave",function(t){r.handleMouseLeave(t)}),this.root.addEventListener("mousewheel",function(t){r.handleMouseWheelEvent(t)},{passive:!1})),i.controls){let t=this.rectangle(this._width-48,16,30,30);t.setAttribute("rx","3"),t.style.fill="#f8f8f8";let e=this.rectangle(this._width-48,46,30,30);e.setAttribute("rx","3"),e.style.fill="#f8f8f8",this.circle(this._width-32,this._height-32,16).style.fill="#f8f8f8"}if(this.draw(),i.labels){let t,e=this.group();e.style.fontFamily="KaTeX_Main",e.style.fontSize="22px",i.title instanceof I?(t=e.appendChild(i.title),t.x=this.width/2,t.y=25):t=e.text(this.width/2,25,i.title),t.setAttribute("alignment-baseline","middle"),t.setAttribute("text-anchor","middle");let n=this.getXLabelPoints(),r=this.getYLabelPoints();for(let s of n){let t=this.internalToAbsolute(s),n=e.text(t.x+i.margin,i.margin+this._height+i.margin/2,""+s.x.toFixed(1));n.setAttribute("alignment-baseline","middle"),n.setAttribute("text-anchor","middle")}for(let s of r){let t=this.internalToAbsolute(s),n=e.text(t.x+i.margin/2,t.y+i.margin,""+s.y.toFixed(1));n.setAttribute("alignment-baseline","middle"),n.setAttribute("text-anchor","middle")}}}set function(t){this._function=t}get function(){return this._function}get originX(){return-this._x}get originY(){return-this._y}updateDisplayCircle(){if(null!=this.displayCircle){let t=this.call(this.displayCircle.cx,!1);isNaN(t)?this.displayCircle.cy=0:isFinite(t)?(this.displayCircle.cy=t,this.xText.contents=this.format(this.displayCircle.cx/this.scaleX),this.yText.contents=this.format(this.displayCircle.cy/this.scaleY)):(this.displayCircle.cy=3*this._height,this.xText.contents=this.format(this.displayCircle.cx/this.scaleX),this.yText.contents=t.toString())}}call(t,e=!1){let i=this.scaleY*this._function(t/this.scaleX);if(e){let t=8,e=this._y+this._height+t,n=this._y-t;-i>e&&(i=-e),-i<n&&(i=-n)}else{let t=this._y-this._height,e=this._y+2*this._height;-i>e&&(i=-e),-i<t&&(i=-t)}return i}format(t){return t>1e4||t<-1e4||t<.01&&t>-.01?t.toExponential(2):t.toPrecision(4)}draw(t=this._x-this._width,e=this._x+2*this._width,i=!1){this.setViewBox(),this.updateDisplayCircle();let n,r=!1,s=t,o=this.call(s,!1),a="";for(isNaN(o)||(a=`M ${s} ${o} `,n=o,r=!0),s+=1;s<e;s+=1){let t=this.call(s,i);!isNaN(t)&&isFinite(t)&&(Math.abs(n-t)>=this._height||!r?(a+=`M ${s.toFixed(1)} ${t.toFixed(1)} `,r=!0):a+=`L ${s.toFixed(1)} ${t.toFixed(1)} `,n=t)}this.fPath.d=a,this.updateDependents()}drawGrid(){this.grid.clear();let t=100*this.visibleHeight/this._height,e=q(100*this.visibleWidth/this._width),i=q(t),n=this.internalX,r=this.internalX+this.visibleWidth,s=this.internalY,o=this.internalY+this.visibleHeight,a=e*Math.floor(n/e);for(;a<r;)this.grid.line(a,s,a,o),a+=e;let h=i*Math.floor(o/i);for(;h>s;)this.grid.line(n,h,r,h),h-=i}internalToAbsolute(t){return{x:t.x*this.scaleX+this.originX,y:-(t.y*this.scaleY-this.originY)}}getXLabelPoints(){let t=[],e=q(250*this.visibleWidth/this._width),i=this.internalX+this.visibleWidth,n=this.internalY,r=e*Math.ceil(this.internalX/e);for(;r<=i;)t.push({x:r,y:n}),r+=e;return t}getYLabelPoints(){let t=[],e=q(250*this.visibleHeight/this._height),i=this.internalX,n=this.internalY,r=e*Math.floor((this.internalY+this.visibleHeight)/e);for(;r>=n;)t.push({x:i,y:-r}),r-=e;return t}handleMouseDown(t){this.active=!0,this.prevX=t.clientX,this.prevY=t.clientY}handleMouseUp(t){this.active=!1}handleMouseLeave(t){this.handleMouseUp(t)}setViewBox(){this.staticGroup.setAttribute("transform",`translate(${-this._x}, ${-this._y})`),this.viewPort.setAttribute("viewBox",`${this.internalX} ${this.internalY} ${this.visibleWidth} ${this.visibleHeight}`)}setOrigin(t,e){this._x=-t,this._y=-e,this.internalX=this._x/this.scaleX,this.internalY=this._y/this.scaleY,this.draw()}handleMouseMove(t){if(this.active){let e=t.clientX-this.prevX,i=t.clientY-this.prevY;this._x-=e,this._y-=i,this.internalX-=e/this.scaleX,this.internalY-=i/this.scaleY,this.prevX=t.clientX,this.prevY=t.clientY,this.draw()}else{let e=this.rect.root.getBoundingClientRect();null!=this.displayCircle&&(this.displayCircle.cx=t.clientX-e.left+this._x,this.updateDisplayCircle())}}handleMouseWheelEvent(t){t.preventDefault();let e=this.rect.root.getBoundingClientRect(),i=t.clientX-e.left,n=t.clientY-e.top,r=Math.exp(.02*(t.deltaY<0?1:-1)),s=n/(this.scaleY*r)-n/this.scaleY;this.internalX-=i/(this.scaleX*r)-i/this.scaleX,this.internalY-=s,this.scaleX*=r,this.scaleY*=r,this.visibleWidth=this._width/this.scaleX,this.visibleHeight=this._height/this.scaleY,this._x=this.internalX*this.scaleX,this._y=this.internalY*this.scaleY,null!=this.displayCircle&&(this.displayCircle.cx=t.clientX-e.left+this._x),this.drawGrid(),this.draw()}export(){let t=new L(0,0,this._width,this._height);return this.xAxis.x1=this._x,this.xAxis.x2=this._x+this._width,this.yAxis.y1=this._y,this.yAxis.y2=this._y+this._height,this.draw(this._x-8,this._x+this._width+8,!0),t}}class J extends L{constructor(t,e={}){if(super(),"string"==typeof t){if(this.container=document.getElementById(t),null==this.container)throw new Error("There is no HTML element with the id: "+t)}else this.container=t;this.container.appendChild(this.root),this.root.classList.add("interactive"),this.background=new T,this.input=new T,this.root.appendChild(this.background.root),this.root.appendChild(this.input.root);let i=Object.assign(Object.assign({},{originX:0,originY:0,width:600,height:300,border:!1}),e);this._originX=i.originX,this._originY=i.originY,this._width=i.width,this._height=i.height,this.root.setAttribute("width",this._width.toString()),this.root.setAttribute("height",this._height.toString()),this.setViewBox(-this._originX,-this._originY,this._width,this._height),this.window=!1,this.border=i.border,this.container.addEventListener("mousedown",function(t){t.preventDefault()})}set width(t){this._width=t,this.root.setAttribute("width",t.toString()),this.setViewBox(-this._originX,-this._originY,this._width,this._height)}get width(){return this._width}set height(t){this._height=t,this.root.setAttribute("height",t.toString()),this.setViewBox(-this._originX,-this._originY,this._width,this._height)}get height(){return this._height}set originX(t){this._originX=t,this.setViewBox(-this._originX,-this._originY,this._width,this._height)}get originX(){return this._originX}set originY(t){this._originY=t,this.setViewBox(-this._originX,-this._originY,this._width,this._height)}get originY(){return this._originY}set window(t){t?this.root.classList.add("window"):this.root.classList.remove("window")}set border(t){t?this.root.classList.add("border"):this.root.classList.remove("border")}get minX(){return-this.originX}get minY(){return-this.originY}get maxX(){return this.minX+this._width}get maxY(){return this.minY+this._height}appendChild(t){return t instanceof B?this.input.appendChild(t):this.background.appendChild(t),t}interactive(t,e,i={}){let n=new J(this.id,i);return n.root.setAttribute("x",t.toString()),n.root.setAttribute("y",e.toString()),n}button(t,e,i){return this.appendChild(new N(t,e,i))}checkBox(t,e,i,n){return this.appendChild(new F(t,e,i,n))}icon(t,e,i,n,r,s={}){let h;h=void 0===s.baseURL?"resources/icons/":s.baseURL,void 0===this.symbols&&(this.symbols=new T,this.root.appendChild(this.symbols.root),this.icons=new Set);let l=new D(t,e,i,n);this.appendChild(l);let c=`${this.id}-${r}`;if(this.icons.has(c))l.href="#"+c;else{let t=this;o(`${h}${r}.svg`).then(function(e){let i=a(e),n=t.symbols.symbol();for(n.root.id=c,n.viewBox=i.getAttribute("viewBox");i.childNodes.length>0;)n.root.appendChild(i.childNodes[0]);l.href="#"+c}).catch(function(t){throw t})}return this.icons.add(c),l}radioControl(t,e,i,n=0){return this.appendChild(new R(t,e,i,n))}dropdownControl(t,e,i,n){return this.appendChild(new X(t,e,i,n))}control(t,e){return this.appendChild(new U(t,e))}controlCircle(t,e){return this.appendChild(new V(t,e))}plot(t,e){return this.appendChild(new K(t,e))}graph(t){return this.appendChild(new W(t))}hoverBox(t){return this.appendChild(new $(t))}map(t,e=null,i={}){let n=new j(e,t,i),r=this.appendChild(n),s=n.root.getBBox();return n.setViewBox(s.x,s.y,s.width,s.height),r}slider(t,e,i){return this.appendChild(new Y(t,e,i))}scrubber(t,e,i){return this.appendChild(new z(t,e,i))}node(t,e,i,n,r){return this.appendChild(new G(t,e,i,n,r))}edge(t,e,i){return this.appendChild(new H(t,e,i))}loadSVG(t){return s(this,void 0,void 0,function*(){let e=new T;return this.appendChild(e),o(t).then(function(t){e.root.appendChild(a(t))}).catch(function(t){throw t}),e})}}var Q=i("fXoL");class Z{}let tt=(()=>{class t{constructor(){this.img=new Z,this.images=[],this.complexImg=new Z,this.complexImages=[],this.blank=new Z}addImage(t){this.images.push(t),this.img=this.images[this.images.length-1]}addSingleImage(t){this.images.push(t)}addComplex(t){this.complexImages.push(t),this.complexImg=this.complexImages[this.complexImages.length-1]}getImage(){return this.img}getImages(){return this.images}removeImage(t){this.images.splice(t,1)}removeComplex(t){this.complexImages.splice(t,1)}clearImages(){this.images=[]}setImage(t){this.img=t}setComplex(t){this.complexImg=t}setBlank(){this.img=this.blank}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Q.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class et{}class it{}class nt{}class rt{}class st{}var ot=i("8j+T");let at=(()=>{class t{constructor(t){this.imageService=t,this.clase=new et,this.storedShapes=[],this.clases=[],this.remover=!0,this.activesShapes=[],this.shapeContainer=[],this.ver=!0,this.id=1,this.errorMessage="",this.xPoints=[],this.yPoints=[],this.totalPoints=0,this.create=!1}setPlusId(t){this.id=parseInt(t)+1}shapeEvent(){if(this.create){let t=this.uptadeOri(event);this.setnCheckPoints(t[0],t[1])}}uptadeOri(t){if(t){let e=document.getElementById("draw_container_id");return[Math.floor(t.clientX-e.getBoundingClientRect().left),Math.floor(t.clientY-e.getBoundingClientRect().top)]}}toggleClassCreation(){this.create=!this.create,this.imageService.images.length>0&&document.getElementById(this.imageService.img.name).click()}checkClassname(t){let e=!0;return this.clases.forEach(i=>{i.name===t&&(e=!1,this.errorMessage="El nombre "+t+" ya existe!")}),0!==t.localeCompare("")&&null===t.match(/\s/)||(e=!1,this.errorMessage="El nombre no puede estar vac\xedo o contener espacios!"),e}crearClase(t){this.clases.push(t)}deleteClase(){const t=this.clases.indexOf(this.clase);this.clases.splice(t,1)}crearShape(t){return s(this,void 0,void 0,function*(){if(0===this.clase.shape.localeCompare("box")){if(this.xPoints[0]<this.xPoints[1]&&this.yPoints[0]<this.yPoints[1])this.crearRect(t);else if(this.xPoints[0]>this.xPoints[1]&&this.yPoints[0]>this.yPoints[1]){const e=this.xPoints[0],i=this.yPoints[0];this.xPoints[0]=this.xPoints[1],this.yPoints[0]=this.yPoints[1],this.xPoints[1]=e,this.yPoints[1]=i,this.crearRect(t)}else if(this.xPoints[0]>this.xPoints[1]&&this.yPoints[0]<this.yPoints[1]){const e=this.xPoints[0];this.xPoints[0]=this.xPoints[1],this.xPoints[1]=e,this.crearRect(t)}else if(this.xPoints[0]<this.xPoints[1]&&this.yPoints[0]>this.yPoints[1]){const e=this.yPoints[0];this.yPoints[0]=this.yPoints[1],this.yPoints[1]=e,this.crearRect(t)}}else 0===this.clase.shape.localeCompare("line")?this.crearLine(t):0===this.clase.shape.localeCompare("arrow")?this.crearArrow(t):0===this.clase.shape.localeCompare("arrowc")&&this.crearArrowc(t)})}selectClase(t){this.clase=t,this.xPoints=[],this.yPoints=[],0===this.clase.shape.localeCompare("box")?this.totalPoints=2:0===this.clase.shape.localeCompare("line")?this.totalPoints=parseInt(this.clase.lines)+1:(0===this.clase.shape.localeCompare("arrow")||0===this.clase.shape.localeCompare("arrowc"))&&(this.totalPoints=1)}setnCheckPoints(t,e){this.yPoints.push(e),this.xPoints.push(t),this.yPoints.length===this.totalPoints&&this.crearShape(this.imageService.img.name).then(()=>{this.yPoints=[],this.xPoints=[]})}crearArrow(t){let e=new it;e.imgName=t,e.activo=!0,e.shapeLine=[],e.color=this.clase.color,e.atribute=this.getAtributeData(),e.shapeLine.push(this.myInteractive.line(0,26.4,0,-26.4)),e.shapeLine.push(this.myInteractive.line(.4,25,26.3,-1.3)),e.shapeLine.push(this.myInteractive.line(.4,-25,26.3,1.3));let i=this.myInteractive.control(this.xPoints[0],this.yPoints[0]);e.shape=this.myInteractive.rectangle(i.x,i.y,0,0),e.shape.update=function(){this.x+=i.dx,this.y+=i.dy},i.constrainWithinBox(2,2,1398,this.myInteractive.height-2);for(let r=0;r<e.shapeLine.length;r++)e.shapeLine[r].style.strokeWidth="4px",e.shapeLine[r].style.stroke=this.clase.color,e.shapeLine[r].update=function(){this.x1+=i.dx,this.x2+=i.dx,this.y1+=i.dy,this.y2+=i.dy,2!==i.x&&2!==i.y||(this.remove(),i.remove(),e.activo=!1,e.shape.remove())},e.shapeLine[r].x1+=this.xPoints[0],e.shapeLine[r].x2+=this.xPoints[0],e.shapeLine[r].y1+=this.yPoints[0],e.shapeLine[r].y2+=this.yPoints[0],e.shapeLine[r].addDependency(i),e.shapeLine[r].update();e.shapeType=this.clase.shape,e.clase=this.clase.name,this.activesShapes.push(e),this.create&&i.remove();const n=this.splitAtributeDataService(e.atribute,";");for(let r=0;r<n.length;r++){let t=this.myInteractive.text(0,0,n[r]);t.style.fill="white",t.style.fontSize="medium",t.update=function(){this.x=i.x+3,this.y=i.y-25+15*(r+1)},t.addDependency(i),t.update()}}crearArrowc(t){let e=new it;e.imgName=t,e.activo=!0,e.shapeLine=[],e.color=this.clase.color,e.atribute=this.getAtributeData(),e.shapeLine.push(this.myInteractive.line(0,26.4,0,-26.4)),e.shapeLine.push(this.myInteractive.line(-25.9,-1.3,0,25)),e.shapeLine.push(this.myInteractive.line(-25.9,1.3,0,-25));let i=this.myInteractive.control(this.xPoints[0],this.yPoints[0]);e.shape=this.myInteractive.rectangle(i.x,i.y,0,0),e.shape.update=function(){this.x+=i.dx,this.y+=i.dy},i.constrainWithinBox(2,2,1398,this.myInteractive.height-2);for(let r=0;r<e.shapeLine.length;r++)e.shapeLine[r].style.strokeWidth="4px",e.shapeLine[r].style.stroke=this.clase.color,e.shapeLine[r].update=function(){this.x1+=i.dx,this.x2+=i.dx,this.y1+=i.dy,this.y2+=i.dy,2!==i.x&&2!==i.y||(this.remove(),i.remove(),e.activo=!1,e.shape.remove())},e.shapeLine[r].x1+=this.xPoints[0],e.shapeLine[r].x2+=this.xPoints[0],e.shapeLine[r].y1+=this.yPoints[0],e.shapeLine[r].y2+=this.yPoints[0],e.shapeLine[r].addDependency(i),e.shapeLine[r].update();e.shapeType=this.clase.shape,e.clase=this.clase.name,this.activesShapes.push(e),this.create&&i.remove();const n=this.splitAtributeDataService(e.atribute,";");for(let r=0;r<n.length;r++){let t=this.myInteractive.text(0,0,n[r]);t.style.fill="white",t.style.fontSize="medium",t.update=function(){this.x=i.x+3,this.y=i.y-25+15*(r+1)},t.addDependency(i),t.update()}}crearLine(t){let e=new it;e.imgName=t,e.activo=!0,e.shapeLine=[];let i=[],n=[],r=parseInt(this.clase.lines);e.lines=this.clase.lines,e.atribute=this.getAtributeData();for(let o=0;o<r;o++)e.shapeLine.push(this.myInteractive.line(0,0,0,0)),i.push(this.myInteractive.control(this.xPoints[o],this.yPoints[o])),o===r-1&&i.push(this.myInteractive.control(this.xPoints[o+1],this.yPoints[o+1]));for(let o=0;o<i.length;o++)i[o].constrainWithinBox(2,2,1398,this.myInteractive.height-2);const s=this.splitAtributeDataService(e.atribute,";");for(let o=0;o<s.length;o++)n.push(this.myInteractive.text(0,0,s[o])),n[o].style.fill="white",n[o].style.fontSize="medium",n[o].update=function(){this.x=i[0].x+3,this.y=i[0].y+15*(o+1)},n[o].addDependency(i[0]),n[o].update();for(let o=0;o<r;o++)e.shapeLine[o].style.stroke=this.clase.color,e.shapeLine[o].style.strokeWidth="3px",e.shapeLine[o].update=function(){if(this.x1=i[o].x,this.x2=i[o+1].x,this.y1=i[o].y,this.y2=i[o+1].y,Math.abs(i[o].x-i[o+1].x)<5&&Math.abs(i[o].y-i[o+1].y)<5){for(let t=0;t<r+1;t++)i[t].remove();for(let t=0;t<r;t++)e.shapeLine[t].remove();for(let t=0;t<n.length;t++)n[t].remove();e.activo=!1}},e.shapeLine[o].addDependency(i[o]),e.shapeLine[o].addDependency(i[o+1]),e.shapeLine[o].update();if(e.shapeType=this.clase.shape,e.color=this.clase.color,e.clase=this.clase.name,this.id+=1,this.activesShapes.push(e),this.create)for(let o=0;o<i.length;o++)i[o].remove()}crearRect(t){let e=new it;e.imgName=t,e.activo=!0,e.shape=this.myInteractive.rectangle(0,0,0,this.yPoints[1]-this.yPoints[0]),e.shape.classList.add("default"),e.shape.style.fill=this.clase.color,e.shape.style.stroke=this.clase.color,e.color=this.clase.color,e.shape.style.strokeWidth="2px",e.shape.style.fillOpacity="0.4",e.shapeType=this.clase.shape;let i=this.myInteractive.control(this.xPoints[0],this.yPoints[0]),n=this.myInteractive.control(this.xPoints[1],this.yPoints[1]);i.constrainWithinBox(2,2,1398,this.myInteractive.height-2),n.constrainWithinBox(2,2,1398,this.myInteractive.height-2),n.update=function(){this.x+=i.dx,this.y+=i.dy},e.atribute=this.getAtributeData();const r=this.splitAtributeDataService(e.atribute,";");for(let s=0;s<r.length;s++){let t=this.myInteractive.text(0,0,r[s]);t.style.fill="white",t.style.fontSize="medium",t.update=function(){this.x=i.x+3,this.y=i.y+15*(s+1),(n.x<i.x||n.y<i.y)&&this.remove()},t.addDependency(i),t.addDependency(n),t.update()}n.addDependency(i),e.shape.update=function(){this.x=i.x,this.y=i.y,this.width=n.x-i.x,this.height=n.y-i.y,(this.width<0||this.height<0)&&(i.remove(),n.remove(),this.remove(),e.activo=!1)},e.shape.update(),e.shape.addDependency(i),e.shape.addDependency(n),e.clase=this.clase.name,this.id+=1,this.activesShapes.push(e),this.create&&(i.remove(),n.remove())}getAtributeData(){let t=document.getElementById("atribute_window"),e="";const i=t.children.length;for(let n=0;n<i;n+=2){let r=t.children[n],s=t.children[n+1];e=n+2!==i?e+r.textContent+s.value+";":e+r.textContent+s.value}return e}crearFromData(t){let e="block";this.clases.forEach(i=>{0===i.name.localeCompare(t.clase)&&(i.view||(e="none"),0===t.shapeType.localeCompare("box")?this.crearRectFromData(t.imgName,t.shape.width,t.shape.height,t.shape.x,t.shape.y,t.color,t.clase,t.shapeType,t.atribute,e):0===t.shapeType.localeCompare("line")?this.crearLineFromData(t.imgName,t.shapeLine,t.lines,t.color,t.clase,t.shapeType,t.atribute,e):0===t.shapeType.localeCompare("arrow")?this.crearArrowFromData(t.imgName,t.shapeLine,t.color,t.clase,t.shapeType,t.atribute,e,t.shape.x,t.shape.y):0===t.shapeType.localeCompare("arrowc")&&this.crearArrowcFromData(t.imgName,t.shapeLine,t.color,t.clase,t.shapeType,t.atribute,e,t.shape.x,t.shape.y))})}crearLineFromData(t,e,i,n,r,s,o,a){let h=new it;h.imgName=t,h.activo=!0,h.shapeLine=[],h.lines=i;let l=[],c=[],d=parseInt(i);for(let p=0;p<d;p++)h.shapeLine.push(this.myInteractive.line(0,0,0,0)),l.push(this.myInteractive.control(e[p].x1,e[p].y1)),l[p].style.display=a,p===d-1&&(l.push(this.myInteractive.control(e[p].x2,e[p].y2)),l[p+1].style.display=a);for(let p=0;p<l.length;p++)l[p].constrainWithinBox(2,2,1398,this.myInteractive.height-2);h.atribute=o;const u=this.splitAtributeDataService(h.atribute,";");for(let p=0;p<u.length;p++)c.push(this.myInteractive.text(0,0,u[p])),c[p].style.fill="white",c[p].style.fontSize="medium",c[p].style.display=a,c[p].update=function(){this.x=l[0].x+3,this.y=l[0].y+15*(p+1)},c[p].addDependency(l[0]),c[p].update();for(let p=0;p<d;p++)h.shapeLine[p].style.stroke=n,h.shapeLine[p].style.strokeWidth="3px",h.shapeLine[p].style.display=a,h.shapeLine[p].update=function(){if(this.x1=l[p].x,this.x2=l[p+1].x,this.y1=l[p].y,this.y2=l[p+1].y,Math.abs(l[p].x-l[p+1].x)<5&&Math.abs(l[p].y-l[p+1].y)<5){for(let t=0;t<d+1;t++)l[t].remove();for(let t=0;t<d;t++)h.shapeLine[t].remove();for(let t=0;t<c.length;t++)c[t].remove();h.activo=!1}},h.shapeLine[p].addDependency(l[p]),h.shapeLine[p].addDependency(l[p+1]),h.shapeLine[p].update();if(h.shapeType=s,h.color=n,h.clase=r,this.activesShapes.push(h),this.create)for(let p=0;p<l.length;p++)l[p].remove()}crearRectFromData(t,e,i,n,r,s,o,a,h,l){let c=new it,d=n+e,u=r+i;c.imgName=t,c.activo=!0,c.shape=this.myInteractive.rectangle(0,0,0,0),c.shape.classList.add("default"),c.shape.style.fill=s,c.shape.style.stroke=s,c.color=s,c.shape.style.strokeWidth="2px",c.shape.style.fillOpacity="0.4",c.shape.style.display=l,c.shapeType=a;let p=this.myInteractive.control(n,r),g=this.myInteractive.control(d,u);p.constrainWithinBox(2,2,1398,this.myInteractive.height-2),g.constrainWithinBox(2,2,1398,this.myInteractive.height-2),p.style.display=l,g.style.display=l,g.update=function(){this.x+=p.dx,this.y+=p.dy},c.atribute=h;const m=this.splitAtributeDataService(c.atribute,";");for(let f=0;f<m.length;f++){let t=this.myInteractive.text(0,0,m[f]);t.style.fill="white",t.style.fontSize="medium",t.style.display=l,t.update=function(){this.x=p.x+3,this.y=p.y+15*(f+1),(g.x<p.x||g.y<p.y)&&this.remove()},t.addDependency(p),t.addDependency(g),t.update()}g.addDependency(p),c.shape.update=function(){this.x=p.x,this.y=p.y,this.width=g.x-p.x,this.height=g.y-p.y,(this.width<0||this.height<0)&&(p.remove(),g.remove(),this.remove(),c.activo=!1)},c.shape.update(),c.shape.addDependency(p),c.shape.addDependency(g),c.clase=o,this.activesShapes.push(c),this.create&&(p.remove(),g.remove())}crearArrowFromData(t,e,i,n,r,s,o,a,h){let l=new it;l.imgName=t,l.activo=!0,l.shapeLine=[],l.shapeType=r,l.atribute=s,l.shapeLine.push(this.myInteractive.line(0,26.4,0,-26.4)),l.shapeLine.push(this.myInteractive.line(.4,25,26.3,-1.3)),l.shapeLine.push(this.myInteractive.line(.4,-25,26.3,1.3));let c=this.myInteractive.control(a,h);l.shape=this.myInteractive.rectangle(a,h,0,0),l.shape.update=function(){this.x+=c.dx,this.y+=c.dy},l.shape.addDependency(c),l.shape.update(),c.constrainWithinBox(2,2,1398,this.myInteractive.height-2);for(let u=0;u<l.shapeLine.length;u++)l.shapeLine[u].style.strokeWidth="4px",l.shapeLine[u].style.stroke=i,l.shapeLine[u].update=function(){this.x1+=c.dx,this.x2+=c.dx,this.y1+=c.dy,this.y2+=c.dy,2!==c.x&&2!==c.y||(this.remove(),c.remove(),l.activo=!1,l.shape.remove())},l.shapeLine[u].x1+=a,l.shapeLine[u].x2+=a,l.shapeLine[u].y1+=h,l.shapeLine[u].y2+=h,l.shapeLine[u].addDependency(c),l.shapeLine[u].update(),l.shapeLine[u].style.display=o;l.color=i,c.style.display=o,l.clase=n,this.activesShapes.push(l),this.create&&c.remove();const d=this.splitAtributeDataService(l.atribute,";");for(let u=0;u<d.length;u++){let t=this.myInteractive.text(0,0,d[u]);t.style.fill="white",t.style.fontSize="medium",t.update=function(){this.x=c.x+3,this.y=c.y-25+15*(u+1)},t.addDependency(c),t.update()}}crearArrowcFromData(t,e,i,n,r,s,o,a,h){let l=new it;l.imgName=t,l.activo=!0,l.shapeLine=[],l.shapeType=r,l.atribute=s,l.shapeLine.push(this.myInteractive.line(0,26.4,0,-26.4)),l.shapeLine.push(this.myInteractive.line(-25.9,-1.3,0,25)),l.shapeLine.push(this.myInteractive.line(-25.9,1.3,0,-25));let c=this.myInteractive.control(a,h);l.shape=this.myInteractive.rectangle(a,h,0,0),l.shape.update=function(){this.x+=c.dx,this.y+=c.dy},l.shape.addDependency(c),l.shape.update(),c.constrainWithinBox(2,2,1398,this.myInteractive.height-2);for(let u=0;u<l.shapeLine.length;u++)l.shapeLine[u].style.strokeWidth="4px",l.shapeLine[u].style.stroke=i,l.shapeLine[u].update=function(){this.x1+=c.dx,this.x2+=c.dx,this.y1+=c.dy,this.y2+=c.dy,2!==c.x&&2!==c.y||(this.remove(),c.remove(),l.activo=!1,l.shape.remove())},l.shapeLine[u].x1+=a,l.shapeLine[u].x2+=a,l.shapeLine[u].y1+=h,l.shapeLine[u].y2+=h,l.shapeLine[u].addDependency(c),l.shapeLine[u].update(),l.shapeLine[u].style.display=o;l.color=i,c.style.display=o,l.clase=n,this.activesShapes.push(l),this.create&&c.remove();const d=this.splitAtributeDataService(l.atribute,";");for(let u=0;u<d.length;u++){let t=this.myInteractive.text(0,0,d[u]);t.style.fill="white",t.style.fontSize="medium",t.update=function(){this.x=c.x+3,this.y=c.y-25+15*(u+1)},t.addDependency(c),t.update()}}removeImage(t){let e=0,i=0,n=!1;this.shapeContainer.forEach(r=>{r.imgName!==t?e++:(i=e,n=!0)}),n&&this.shapeContainer.splice(i,1),this.activesShapes=[]}refreshContainer(t){return s(this,void 0,void 0,function*(){if(this.shapeContainer.length>0){let e=0,i=0,n=!1;this.shapeContainer.forEach(r=>{r.imgName!==t?e++:(i=e,n=!0)}),n&&this.shapeContainer.splice(i,1)}this.saveShapes(t,this.activesShapes).then(t=>{this.shapeContainer.push(t)})})}createContainers(t){return s(this,void 0,void 0,function*(){let e=new rt;e.imgName=t.name,e.height=t.height,e.width=t.width,e.shapeList=[],this.shapeContainer.push(e)})}saveShapes(t,e){return s(this,void 0,void 0,function*(){let e=new rt;return e.imgName=t,e.shapeList=[],e.width=this.imageService.complexImg.width,e.height=this.imageService.complexImg.height,this.activesShapes.forEach(t=>{t.activo&&e.shapeList.push(t)}),e})}clearActiveShapes(){this.activesShapes=[]}exportData(t){this.refreshContainer(t).then(()=>{let t=[];this.shapeContainer.forEach(e=>{e.shapeList.forEach(i=>{let n=new nt,r=1400/parseInt(e.width);n.imgName=i.imgName,n.imgHeight=e.height,n.imgWidth=e.width,n.clase=i.clase,n.shapetype=i.shapeType;let s="";console.log("intento separar"),console.log(i.atribute);let o=this.splitAtributeDataService(i.atribute,";");console.log("logrado");for(let t=0;t<o.length;t++){let e=this.splitAtributeDataService(o[t],":");e.length>1&&(s=s+'"'+e[0]+'":"'+e[1]+'"',t<o.length-1&&(s+=";"))}if(n.atribute="{"+s+"}",n.id=Math.random(),0===i.shapeType.localeCompare("box"))n.oriX=Math.floor(parseInt(i.shape.x)/r).toString(),n.oriY=Math.floor(parseInt(i.shape.y)/r).toString(),n.width=Math.floor(parseInt(i.shape.width)/r).toString(),n.height=Math.floor(parseInt(i.shape.height)/r).toString(),n.color=i.color,t.push(n);else if(0===i.shapeType.localeCompare("line")){const e=parseInt(i.lines);n.oriX="",n.oriY="";for(let t=0;t<e;t++){let s=Math.floor(parseInt(i.shapeLine[t].x1)/r).toString(),o=Math.floor(parseInt(i.shapeLine[t].y1)/r).toString(),a=Math.floor(parseInt(i.shapeLine[t].x2)/r).toString(),h=Math.floor(parseInt(i.shapeLine[t].y2)/r).toString();t===e-1?(n.oriX=n.oriX+s+","+a,n.oriY=n.oriY+o+","+h):(n.oriX=n.oriX+s+","+a+",",n.oriY=n.oriY+o+","+h+",")}n.oriX='"'+n.oriX+'"',n.oriY='"'+n.oriY+'"',n.width="",n.height="",n.color=i.color,t.push(n)}else(0===i.shapeType.localeCompare("arrow")||0===i.shapeType.localeCompare("arrowc"))&&(n.oriX=Math.floor(parseInt(i.shape.x)/r).toString(),n.oriY=Math.floor(parseInt(i.shape.y)/r).toString(),n.width="0",n.height="0",n.color=i.color,t.push(n))})}),new ot.ExportToCsv({fieldSeparator:",",quoteStrings:'"',decimalSeparator:"",showLabels:!0,useTextFile:!1,useBom:!0,useKeysAsHeaders:!0}).generateCsv(t)})}splitAtributeDataService(t,e){return t.split(e)}defaulClases(){return s(this,void 0,void 0,function*(){this.clases=[];const t=["CAN","ROC","J3","V3","M","MTV"],e=["Escala","Eje Sondaje","Fractura","Vetilla","Molido","Molido (TV)"],i=["line","line","line","line","box","box"],n=[1,1,2,2,0,0],r=["#FFFFFF","#000000","#00FF00","#FF8000","#0000FF","#FF0000"],s=["escala.png","eje.png","fractura3ptos.png","vetilla3ptos.png","molido.png","molidoTV.png"],o=["base","base","geo","geo","geo","geo"];for(let a=0;a<t.length;a++){let h=new et;h.showName=e[a],h.name=t[a],h.shape=i[a],h.lines=n[a].toString(),h.color=r[a],h.view=!0,h.icon=s[a],h.upClass=o[a],"CAN"===t[a]&&(h.atribute="dist:"),"J3"!==t[a]&&"V3"!==t[a]||(h.atribute="alfa:;beta:"),"M"===t[a]&&(h.atribute="id:"),"MTV"===t[a]&&(h.atribute="id:;frac:;obs:"),this.clases.push(h)}})}}return t.\u0275fac=function(e){return new(e||t)(Q.bc(tt))},t.\u0275prov=Q.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ht=(()=>{class t{constructor(){this.zoom=2,this.glassActive=!1}removeGlass(){let t=document.getElementsByClassName("img-magnifier-glass");t[0]&&t[0].remove()}changeGlass(){this.glassActive=!this.glassActive,this.glassActive?this.magniGlass("image"):this.removeGlass()}setZoom(t){this.zoom=t,this.removeGlass(),this.magniGlass("image")}magniGlass(t){let e,i,n;if(document.getElementsByClassName("img-magnifier-glass")[0])return;if(!this.glassActive)return;let r=this.zoom;const s=document.getElementById(t),o=document.getElementById("my-interactive");let a=document.createElement("div");function h(t){var n,o,h;t.preventDefault(),n=function(t){var e,i=0,n=0;return t=t||window.event,e=s.getBoundingClientRect(),i=t.pageX-e.left,n=t.pageY-e.top,{x:i-=window.pageXOffset,y:n-=window.pageYOffset}}(t),(o=n.x)>s.width-e/r&&(o=s.width-e/r),o<e/r&&(o=e/r),(h=n.y)>s.height-i/r&&(h=s.height-i/r),h<i/r&&(h=i/r),a.style.left=o-e+"px",a.style.top=h-i+"px",a.style.backgroundPosition="-"+(o*r-e+3)+"px -"+(h*r-i+3)+"px"}a.setAttribute("class","img-magnifier-glass"),o.parentElement.insertBefore(a,o),a.style.backgroundImage="url('"+s.src+"')",a.style.backgroundRepeat="no-repeat",a.style.backgroundSize=s.width*r+"px "+s.height*r+"px",n=3,e=a.offsetWidth/2,i=a.offsetHeight/2,a.addEventListener("mousemove",h),o.addEventListener("mousemove",h),a.addEventListener("touchmove",h),o.addEventListener("touchmove",h)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Q.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var lt=i("AytR"),ct=i("vkgz"),dt=i("J5zx"),ut=i("tk/3");let pt=(()=>{class t{constructor(t){this.http=t,this.baseUrl=lt.a.baseUrl}get user(){return Object.assign({},this._user)}auth(t){return s(this,void 0,void 0,function*(){return this.http.post(this.baseUrl+"/login",{id:"",username:"",password:"",mail:t,type:0}).pipe(Object(ct.a)(t=>{this._user=t}))})}create(t,e,i,n){return s(this,void 0,void 0,function*(){const r=dt.genSaltSync(10),s=dt.hashSync(e,r);return this.http.post(this.baseUrl+"/user",{id:"",username:t,password:s,mail:i,type:n})})}}return t.\u0275fac=function(e){return new(e||t)(Q.bc(ut.a))},t.\u0275prov=Q.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),gt=(()=>{class t{constructor(t){this.homeService=t}get user(){return this.homeService.user}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(Q.Ob(pt))},t.\u0275cmp=Q.Ib({type:t,selectors:[["app-navbar"]],decls:4,vars:1,consts:[["src","assets/images/logograiph.png","alt",""],[2,"float","right"]],template:function(t,e){1&t&&(Q.Ub(0,"ul"),Q.Pb(1,"img",0),Q.Ub(2,"span",1),Q.Gc(3),Q.Tb(),Q.Tb()),2&t&&(Q.Bb(3),Q.Hc(e.user.username))},styles:["ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0;overflow:hidden;background-color:var(--darkgray);max-height:5em}img[_ngcontent-%COMP%]{margin-left:0;margin-right:0;max-height:4em;max-width:auto}img[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{float:left}li[_ngcontent-%COMP%]{height:100%}.dropbtn[_ngcontent-%COMP%], li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;color:#fff;text-align:center;padding:1.25em;text-decoration:none;transition:.25s linear}.dropdown[_ngcontent-%COMP%]:hover   .dropbtn[_ngcontent-%COMP%], li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--gray)}"]}),t})();class mt extends L{constructor(t,e={}){if(super(),"string"==typeof t){if(this.container=document.getElementById(t),null==this.container)throw new Error("There is no HTML element with the id: "+t)}else this.container=t;this.container.appendChild(this.root),this.root.classList.add("interactive"),this.background=new T,this.input=new T,this.root.appendChild(this.background.root),this.root.appendChild(this.input.root);let i=Object.assign(Object.assign({},{originX:0,originY:0,width:600,height:300,border:!1}),e);this._originX=i.originX,this._originY=i.originY,this._width=i.width,this._height=i.height,this.root.setAttribute("width",this._width.toString()),this.root.setAttribute("height",this._height.toString()),this.setViewBox(-this._originX,-this._originY,this._width,this._height),this.window=!1,this.border=i.border,this.container.addEventListener("mousedown",function(t){t.preventDefault()})}set width(t){this._width=t,this.root.setAttribute("width",t.toString()),this.setViewBox(-this._originX,-this._originY,this._width,this._height)}get width(){return this._width}set height(t){this._height=t,this.root.setAttribute("height",t.toString()),this.setViewBox(-this._originX,-this._originY,this._width,this._height)}get height(){return this._height}set originX(t){this._originX=t,this.setViewBox(-this._originX,-this._originY,this._width,this._height)}get originX(){return this._originX}set originY(t){this._originY=t,this.setViewBox(-this._originX,-this._originY,this._width,this._height)}get originY(){return this._originY}set window(t){t?this.root.classList.add("window"):this.root.classList.remove("window")}set border(t){t?this.root.classList.add("border"):this.root.classList.remove("border")}get minX(){return-this.originX}get minY(){return-this.originY}get maxX(){return this.minX+this._width}get maxY(){return this.minY+this._height}appendChild(t){return t instanceof B?this.input.appendChild(t):this.background.appendChild(t),t}interactive(t,e,i={}){let n=new mt(this.id,i);return n.root.setAttribute("x",t.toString()),n.root.setAttribute("y",e.toString()),n}button(t,e,i){return this.appendChild(new N(t,e,i))}checkBox(t,e,i,n){return this.appendChild(new F(t,e,i,n))}icon(t,e,i,n,r,s={}){let h;h=void 0===s.baseURL?"resources/icons/":s.baseURL,void 0===this.symbols&&(this.symbols=new T,this.root.appendChild(this.symbols.root),this.icons=new Set);let l=new D(t,e,i,n);this.appendChild(l);let c=`${this.id}-${r}`;if(this.icons.has(c))l.href="#"+c;else{let t=this;o(`${h}${r}.svg`).then(function(e){let i=a(e),n=t.symbols.symbol();for(n.root.id=c,n.viewBox=i.getAttribute("viewBox");i.childNodes.length>0;)n.root.appendChild(i.childNodes[0]);l.href="#"+c}).catch(function(t){throw t})}return this.icons.add(c),l}radioControl(t,e,i,n=0){return this.appendChild(new R(t,e,i,n))}dropdownControl(t,e,i,n){return this.appendChild(new X(t,e,i,n))}control(t,e){return this.appendChild(new U(t,e))}controlCircle(t,e){return this.appendChild(new V(t,e))}plot(t,e){return this.appendChild(new K(t,e))}graph(t){return this.appendChild(new W(t))}hoverBox(t){return this.appendChild(new $(t))}map(t,e=null,i={}){let n=new j(e,t,i),r=this.appendChild(n),s=n.root.getBBox();return n.setViewBox(s.x,s.y,s.width,s.height),r}slider(t,e,i){return this.appendChild(new Y(t,e,i))}scrubber(t,e,i){return this.appendChild(new z(t,e,i))}node(t,e,i,n,r){return this.appendChild(new G(t,e,i,n,r))}edge(t,e,i){return this.appendChild(new H(t,e,i))}loadSVG(t){return s(this,void 0,void 0,function*(){let e=new T;return this.appendChild(e),o(t).then(function(t){e.root.appendChild(a(t))}).catch(function(t){throw t}),e})}}var ft=i("NpuA");let yt=(()=>{let t=class{constructor(){this._papa=ft}parse(t,e){return this._papa.parse(t,e)}unparse(t,e){return this._papa.unparse(t,e)}setLocalChunkSize(t){this._papa.LocalChunkSize=t}setRemoteChunkSize(t){this._papa.RemoteChunkSize=t}setDefaultDelimiter(t){this._papa.DefaultDelimiter=t}get badDelimiters(){return this._papa.BAD_DELIMITERS}get recordSeparator(){return this._papa.RECORD_SEP}get unitSeparator(){return this._papa.UNIT_SEP}get workersSupported(){return this._papa.WORKERS_SUPPORTED}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(Q.Kb)({factory:function(){return new t},token:t,providedIn:"root"}),t})();function vt(t,e){if(1&t&&(Q.Ub(0,"span"),Q.Gc(1),Q.Tb()),2&t){const t=Q.ic();Q.Bb(1),Q.Hc(t.message)}}function bt(t,e){if(1&t){const t=Q.Vb();Q.Ub(0,"li",21),Q.ec("click",function(){Q.yc(t);const i=e.$implicit;return Q.ic().imageSelect(i.name)}),Q.Gc(1),Q.Tb()}if(2&t){const t=e.$implicit;Q.oc("id",t.name),Q.oc("title",t.name),Q.Bb(1),Q.Hc(t.name)}}let wt=(()=>{class t{constructor(t,e,i,n){this.imageService=t,this.drawsService=e,this.sidebarService=i,this.papa=n,this.imgget=new Z}ngOnInit(){}preview(t){0!==t.length&&(this.drawsService.refreshContainer(this.imageService.img.name),this.drawsService.myInteractive.remove(),this.drawsService.myInteractive=new mt("my-interactive"),this.drawsService.myInteractive.width=1400,this.drawsService.clearActiveShapes(),null!=t[0].type.match(/image\/*/)?1===t.length?this.loadFile(t[0]).then(()=>{this.syncFunction(80*t.length).then(()=>{this.sortList("imageheaderid").then(()=>{this.createImageContainer(),this.imageService.setBlank(),this.sortShort().then(()=>{})})})}):t.length>1&&this.loadFiles(t).then(()=>{this.syncFunction(80*t.length).then(()=>{this.sortList("imageheaderid").then(()=>{this.createImageContainer(),this.imageService.setBlank(),this.sortShort().then(()=>{document.getElementById("imageheaderid").firstChild.click()})})})}):this.message="Only images are supported.")}createImageContainer(){return s(this,void 0,void 0,function*(){this.imageService.images.forEach(t=>{let e=!0;this.drawsService.shapeContainer.forEach(i=>{0===t.name.localeCompare(i.imgName)&&(e=!1)}),e&&this.drawsService.createContainers(t)})})}loadFiles(t){return s(this,void 0,void 0,function*(){for(let e=0;e<t.length;e++)yield this.loadFile(t[e])})}loadFile(t){return s(this,void 0,void 0,function*(){if(this.checkImageName(t.name)){let e=new Z,i=new FileReader;i.readAsDataURL(t),i.onload=n=>{e.name=t.name,e.imgURL=i.result,this.imageService.addImage(e),this.syncFunction(50).then(t=>{this.sidebarService.removeGlass();let i=document.getElementById("image");e.height=i.naturalHeight.toString(),e.width=i.naturalWidth.toString(),this.imageService.addComplex(e),document.getElementById("image-box").style.marginTop="-"+i.clientHeight.toString()+"px",this.drawsService.myInteractive.height=i.clientHeight,this.sidebarService.magniGlass("image");const n=document.getElementById("imageheaderid").getElementsByClassName("list");this.syncFunction(50).then(t=>{for(var e=0;e<n.length;e++)n[e].addEventListener("click",function(){let t=document.getElementsByClassName("imageActive");t.length>0&&(t[0].className=t[0].className.replace(" imageActive","")),this.className+=" imageActive"})})})}}})}sortShort(){return s(this,void 0,void 0,function*(){var t,e,i;for(e=!0;e;){for(e=!1,t=0;t<this.imageService.images.length-1;t++)if(i=!1,1===this.imageService.images[t].name.localeCompare(this.imageService.images[t+1].name)){i=!0;break}if(i){let i=this.imageService.images[t];this.imageService.images[t]=this.imageService.images[t+1],this.imageService.images[t+1]=i,e=!0}}})}sortList(t){return s(this,void 0,void 0,function*(){var e,i,n;i=!0;let r=document.getElementById(t).getElementsByTagName("li");for(;i;){for(i=!1,e=0;e<r.length-1;e++){n=!1;let t=r[e].innerHTML.toLowerCase(),i=r[e+1].innerHTML.toLowerCase();if(1===t.localeCompare(i)){n=!0;break}}n&&(r[e].parentNode.insertBefore(r[e+1],r[e]),i=!0)}})}checkImageName(t){let e=!0;return this.imageService.images.forEach(i=>{0===t.localeCompare(i.name)&&(e=!1)}),e}resolveAfter2Seconds(t){return new Promise(e=>{setTimeout(()=>{e(t)},t)})}syncFunction(t){return s(this,void 0,void 0,function*(){const e=yield this.resolveAfter2Seconds(t),i=yield this.resolveAfter2Seconds(t);return t+e+i})}imageSelect(t){this.drawsService.refreshContainer(this.imageService.img.name).then(()=>{this.drawsService.myInteractive.remove(),this.imageService.images.forEach(e=>{0===e.name.localeCompare(t)&&(this.imageService.setImage(e),this.syncFunction(50).then(t=>{this.sidebarService.removeGlass();let e=document.getElementById("image");document.getElementById("image-box").style.marginTop="-"+e.clientHeight.toString()+"px",this.drawsService.myInteractive.height=e.clientHeight,this.sidebarService.magniGlass("image")}))}),this.imageService.complexImages.forEach(e=>{0===e.name.localeCompare(t)&&this.imageService.setComplex(e)}),this.drawsService.myInteractive=new mt("my-interactive"),this.drawsService.myInteractive.width=1400,this.drawsService.myInteractive.window=!1;let e=document.getElementById("image");document.getElementById("image-box").style.marginTop="-"+e.clientHeight.toString()+"px",this.drawsService.myInteractive.height=e.clientHeight,this.drawsService.clearActiveShapes();let i=0,n=0,r=!1;this.drawsService.shapeContainer.forEach(e=>{e.imgName!==t?i++:(n=i,r=!0)}),r&&this.drawsService.shapeContainer[n].shapeList.forEach(t=>{this.drawsService.crearFromData(t)})})}changeDisplay(t){"none"==document.getElementById(t).style.display?document.getElementById(t).style.display="block":document.getElementById(t).style.display="none"}eliminar(){const t=this.imageService.images.indexOf(this.imageService.img),e=this.imageService.complexImages.indexOf(this.imageService.complexImg);this.drawsService.removeImage(this.imageService.img.name),this.imageService.setBlank(),this.imageService.removeImage(t),this.imageService.removeComplex(e),this.drawsService.myInteractive.remove(),this.changeDisplay("alert1")}hideShowSection(t){"none"==document.getElementById(t).style.display?document.getElementById(t).style.display="block":document.getElementById(t).style.display="none"}}return t.\u0275fac=function(e){return new(e||t)(Q.Ob(tt),Q.Ob(at),Q.Ob(ht),Q.Ob(yt))},t.\u0275cmp=Q.Ib({type:t,selectors:[["app-imagebar"]],decls:36,vars:3,consts:[["href",Q.Kc("https://fonts.googleapis.com/icon?family=Material+Icons"),"rel","stylesheet"],[1,"title",3,"click"],["id","button-loads",1,"button-container",2,"display","none"],["id","image-input","type","file","accept","image/*","multiple","",1,"image_input",3,"change"],["files",""],["for","image-input","title","Carga una o varias im\xe1genes desde su dispositivo."],["id","folder-input","type","file","accept","image/*","webkitdirectory","","multiple","",1,"image_input",3,"change"],["file",""],["for","folder-input","title","Carga una o varias im\xe1genes desde su dispositivo."],[4,"ngIf"],["id","image-show",2,"display","none"],[1,"imageContainer"],["id","imageheaderid"],["class","list",3,"id","title","click",4,"ngFor","ngForOf"],[1,"button-container"],["id","btnEliminar",1,"btn",3,"click"],["id","image-show"],["id","alert1",1,"alert",2,"display","none"],[1,"flexButtons"],[1,"material-icons",3,"click"],["id","temporal-interactive",2,"display","none"],[1,"list",3,"id","title","click"]],template:function(t,e){if(1&t){const t=Q.Vb();Q.Pb(0,"link",0),Q.Ub(1,"div"),Q.Ub(2,"p",1),Q.ec("click",function(){return e.hideShowSection("button-loads")}),Q.Gc(3,"Cargar"),Q.Tb(),Q.Ub(4,"div",2),Q.Ub(5,"input",3,4),Q.ec("change",function(){Q.yc(t);const i=Q.uc(6);return e.preview(i.files)}),Q.Tb(),Q.Ub(7,"label",5),Q.Gc(8,"Im\xe1genes"),Q.Tb(),Q.Pb(9,"br"),Q.Ub(10,"input",6,7),Q.ec("change",function(){Q.yc(t);const i=Q.uc(11);return e.preview(i.files)}),Q.Tb(),Q.Ub(12,"label",8),Q.Gc(13,"Carpeta de Im\xe1genes"),Q.Tb(),Q.Tb(),Q.Tb(),Q.Ec(14,vt,2,1,"span",9),Q.Ub(15,"p",1),Q.ec("click",function(){return e.hideShowSection("image-show")}),Q.Gc(16,"Im\xe1genes cargadas"),Q.Tb(),Q.Ub(17,"div",10),Q.Ub(18,"div",11),Q.Ub(19,"ul",12),Q.Ec(20,bt,2,3,"li",13),Q.Tb(),Q.Tb(),Q.Ub(21,"div",14),Q.Ub(22,"button",15),Q.ec("click",function(){return e.changeDisplay("alert1")}),Q.Gc(23,"Eliminar Imagen"),Q.Tb(),Q.Tb(),Q.Tb(),Q.Ub(24,"div",16),Q.Ub(25,"div",17),Q.Ub(26,"a"),Q.Ub(27,"strong"),Q.Gc(28,"Atenci\xf3n"),Q.Tb(),Q.Gc(29),Q.Tb(),Q.Ub(30,"div",18),Q.Ub(31,"button",19),Q.ec("click",function(){return e.eliminar()}),Q.Gc(32," check "),Q.Tb(),Q.Ub(33,"button",19),Q.ec("click",function(){return e.changeDisplay("alert1")}),Q.Gc(34,"clear"),Q.Tb(),Q.Tb(),Q.Tb(),Q.Pb(35,"div",20),Q.Tb()}2&t&&(Q.Bb(14),Q.nc("ngIf",e.message),Q.Bb(6),Q.nc("ngForOf",e.imageService.images),Q.Bb(9),Q.Ic("\xa0\xbfEst\xe1 seguro que desea eliminar ",e.imageService.img.name,"? "))},directives:[n.l,n.k],styles:["ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0}.title[_ngcontent-%COMP%]{padding-left:10px;color:var(--white);font-family:myFont;margin-right:auto;margin-left:1em;margin-top:.5em;cursor:pointer;transition:.25s ease-in}.title[_ngcontent-%COMP%]:hover{color:var(--lightgray);background-color:var(--gray)}.imageContainer[_ngcontent-%COMP%]{height:150px;background-color:var(--darkwhite);border-color:var(--orange);border-radius:10%;border-style:solid;max-width:180px;display:block;overflow-y:auto;margin-left:1em;margin-bottom:1em}.imageContainer[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:var(--lightblack);font-size:small;padding-left:0;margin-left:3px;font-family:myFont}.imageContainer[_ngcontent-%COMP%]   .imageActive[_ngcontent-%COMP%], .list[_ngcontent-%COMP%]:hover{color:var(--purple);font-weight:800;cursor:pointer}.alert[_ngcontent-%COMP%]{display:none;background-color:var(--lightorange);color:var(--black);margin-left:1em;border-radius:5%;font-size:small;margin-right:1em}.flexButtons[_ngcontent-%COMP%]{display:flex;border:solid var(--lightblack);width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin:1em}.flexButtons[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{border:none;color:#000;background-color:var(--lightpink);cursor:pointer;transition:all .3s ease-out;border:solid var(--darkwhite)}.flexButtons[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:hover{background:var(--orange)}.btn[_ngcontent-%COMP%]{background-color:var(--lightorange);padding:1em;border:solid var(--lightorange);transition:all .5s ease;font-family:myFont}.btn[_ngcontent-%COMP%]:hover{background:var(--orange);border-color:var(--orange)}.button-container[_ngcontent-%COMP%], .export[_ngcontent-%COMP%]{margin-left:1em}.export[_ngcontent-%COMP%]{background-color:var(--lightgreen);border-color:var(--lightgreen)}.export[_ngcontent-%COMP%]:hover{background-color:var(--green);border-color:var(--green)}"]}),t})();function xt(t,e){if(1&t){const t=Q.Vb();Q.Ub(0,"div"),Q.Ub(1,"input",32),Q.ec("click",function(){Q.yc(t);const e=Q.ic().$implicit;return Q.ic(2).toggleClassView(e.name)}),Q.Tb(),Q.Pb(2,"label",33),Q.Ub(3,"input",34),Q.ec("click",function(){Q.yc(t);const e=Q.ic().$implicit;return Q.ic(2).classSelector(e.name)}),Q.Tb(),Q.Ub(4,"label",35),Q.Gc(5),Q.Tb(),Q.Pb(6,"img",36),Q.Tb()}if(2&t){const t=Q.ic().$implicit;Q.Db(t.upClass),Q.Bb(1),Q.oc("id",t.name),Q.Bb(2),Q.oc("id",t.name),Q.Bb(2),Q.Hc(t.showName),Q.Bb(1),Q.pc("src","assets/icons/",t.icon,"",Q.zc)}}function _t(t,e){if(1&t&&(Q.Ub(0,"div"),Q.Ec(1,xt,7,7,"div",31),Q.Tb()),2&t){const t=e.$implicit,i=Q.ic().$implicit;Q.Bb(1),Q.nc("ngIf",t.upClass===i.upClass)}}function Ct(t,e){if(1&t){const t=Q.Vb();Q.Ub(0,"div"),Q.Ub(1,"h5",29),Q.ec("click",function(){Q.yc(t);const i=e.$implicit;return Q.ic().changeActiveUpClass(i.id)}),Q.Gc(2),Q.Tb(),Q.Ub(3,"div",30),Q.Ec(4,_t,2,1,"div",11),Q.Tb(),Q.Tb()}if(2&t){const t=e.$implicit,i=Q.ic();Q.Bb(2),Q.Hc(t.nombre),Q.Bb(1),Q.oc("id",t.id),Q.Bb(1),Q.nc("ngForOf",i.draswService.clases)}}function St(t,e){if(1&t){const t=Q.Vb();Q.Ub(0,"div",37),Q.Gc(1," Se eliminar\xe1 "),Q.Ub(2,"strong"),Q.Gc(3),Q.Tb(),Q.Gc(4,". \xbfDesea continuar? "),Q.Ub(5,"div"),Q.Ub(6,"button",38),Q.ec("click",function(){return Q.yc(t),Q.ic().confirmDelete("classDeleteid")}),Q.Gc(7,"check"),Q.Tb(),Q.Ub(8,"button",39),Q.ec("click",function(){return Q.yc(t),Q.ic().cancelDelete("classDeleteid")}),Q.Gc(9,"clear"),Q.Tb(),Q.Tb(),Q.Tb()}if(2&t){const t=Q.ic();Q.Bb(3),Q.Hc(t.draswService.clase.name)}}let Et=(()=>{class t{constructor(t,e,i,n){this.draswService=t,this.imageService=e,this.sidebarService=i,this.papa=n,this.show=!1,this.isHidden=!1,this.categories=[]}ngOnInit(){this.draswService.myInteractive=new J("my-interactive"),this.draswService.myInteractive.width=200,this.draswService.myInteractive.height=200,document.getElementById("draw_container_id").addEventListener("click",this.draswService.uptadeOri,!1),this.color="#844444",this.name="",this.draswService.defaulClases().then(t=>{this.fillCategories()})}mostrar(t){document.getElementById(t).style.display="block",document.getElementById("class-creation").style.display="block"}confirmCreation(t,e){let i,n=!1,r=!1;if(0===e.localeCompare("box")){this.width=document.getElementById("width"),this.height=document.getElementById("height"),this.name=document.getElementById("name"),i.name=this.name.value,i.width=parseInt(this.width.value),i.height=parseInt(this.height.value),i.color=this.color,i.shape=e,i.view=!0;let t=document.getElementById("atributeForm"),s="";const o=t.children.length;if(n=this.draswService.checkClassname(i.name),r=this.checkFieldNames(t,o),r&&n){for(let e=0;e<o;e+=2){let i=t.firstChild;s=s+i.value+":",t.removeChild(t.firstChild),i=t.firstChild,e+2!==o?s=s+i.value+";":s+=i.value,t.removeChild(t.firstChild)}i.atribute=s}}else if(0===e.localeCompare("line")){this.name=document.getElementById("linename");const t=document.getElementById("points");i.lines=t.value,i.name=this.name.value,i.color=this.color,i.shape=e,i.view=!0;let s=document.getElementById("atributeFormLine"),o="";const a=s.children.length;if(n=this.draswService.checkClassname(i.name),r=this.checkFieldNames(s,a),r&&n){for(let t=0;t<a;t+=2){let e=s.firstChild;o=o+e.value+":",s.removeChild(s.firstChild),e=s.firstChild,t+2!==a?o=o+e.value+";":o+=e.value,s.removeChild(s.firstChild)}i.atribute=o}}r&&n?(this.draswService.crearClase(i),this.show1("class-creation","line-creation","boxselector","lineselector"),this.width=document.getElementById("width"),this.height=document.getElementById("height"),this.name=document.getElementById("name"),this.width.value=50,this.height.value=50,this.color="#844444",this.name.value="",this.name=document.getElementById("linename"),this.name.value="",document.getElementById(t).style.display="none",document.getElementById("classNameAlertLine").style.display="none",this.show=!0,document.getElementById("shape-selector").style.display="none"):0===e.localeCompare("line")?document.getElementById("classNameAlertLine").style.display="block":document.getElementById("classNameAlert").style.display="block"}cancelCreation(t){this.show1("class-creation","line-creation","boxselector","lineselector"),this.width=document.getElementById("width"),this.height=document.getElementById("height"),this.name=document.getElementById("name"),this.width.value=50,this.height.value=50,this.color="#844444",this.name.value="",this.name=document.getElementById("linename"),this.name.value="",document.getElementById(t).style.display="none",document.getElementById("classNameAlert").style.display="none",document.getElementById("shape-selector").style.display="none"}crearForma(){}mostrarDeleteAlert(t){document.getElementById(t).style.display="block",document.getElementById("shape-selector").style.display="none",document.getElementById("class-creation").style.display="none"}confirmDelete(t){this.draswService.deleteClase(),document.getElementById(t).style.display="none"}cancelDelete(t){document.getElementById(t).style.display="none"}classSelector(t){if(document.getElementById("class_cretion_container").style.display="block",document.getElementById("shape-management").style.display="block",document.getElementById("shape-creator").className="active-button",this.draswService.clases.forEach(e=>{e.name===t&&this.draswService.selectClase(e)}),this.draswService.clase.atribute){let t=this.splitAtributeData(this.draswService.clase.atribute,";"),e=document.getElementById("atribute_window");const i=e.children.length;for(let n=0;n<i;n++)e.removeChild(e.firstChild);t.forEach(t=>{let i=this.splitAtributeData(t,":"),n=this.createNameLabel(i[0]),r=this.createValueLabel(i[1]);e.appendChild(n),e.appendChild(r)})}else{let t=document.getElementById("atribute_window");const e=t.children.length;for(let i=0;i<e;i++)t.removeChild(t.firstChild)}}show1(t,e,i,n){document.getElementById(i).className="active-button",document.getElementById(n).className="inactive-button",document.getElementById(t).style.display="block",document.getElementById(e).style.display="none"}addAtribute(t){let e=this.createValueLabel(""),i=this.createValueLabel(""),n=document.getElementById(t);n.appendChild(e),n.appendChild(i)}removeAtribute(t){let e=document.getElementById(t);e.lastChild&&(e.removeChild(e.lastChild),e.removeChild(e.lastChild))}checkFieldNames(t,e){let i=!0;const n=/\s/;for(let r=0;r<e;r+=2){let e=t.children[r];0!==e.value.localeCompare("")&&null===e.value.match(n)||(i=!1,this.draswService.errorMessage="El nombre del atributo no puede estar vac\xedo o tener espacios.")}return i}syncFunction(t){return s(this,void 0,void 0,function*(){const e=yield this.resolveAfter2Seconds(20),i=yield this.resolveAfter2Seconds(30);return t+e+i})}resolveAfter2Seconds(t){return new Promise(e=>{setTimeout(()=>{e(t)},1)})}splitAtributeData(t,e){return t.split(e)}showEditForm(t){if(t.atribute){let e=this.splitAtributeData(t.atribute,";"),i=document.getElementById("shape-edit-container");const n=i.children.length;for(let t=0;t<n;t++)i.removeChild(i.firstChild);e.forEach(t=>{let e=this.splitAtributeData(t,":"),n=this.createNameLabel(e[0]),r=this.createValueLabel(e[1]);i.appendChild(n),i.appendChild(r)}),document.getElementById("uptade-btn").style.display="block",this.temporalShape=t}else{let t=document.getElementById("shape-edit-container");const e=t.children.length;for(let i=0;i<e;i++)t.removeChild(t.firstChild);document.getElementById("uptade-btn").style.display="none"}}updateShape(t){let e="",i=document.getElementById(t);const n=i.children.length;for(let r=0;r<n;r+=2){let t=i.children[r],s=i.children[r+1];e=r+2!==n?e+t.textContent+s.value+";":e+t.textContent+s.value}this.temporalShape.atribute=e}createValueLabel(t){let e=document.createElement("textarea");return e.className="atributebox",e.style.border="none",e.style.resize="none",e.style.marginLeft="1em",e.style.marginBottom="10px",e.style.width="5em",e.style.height="2.5em",e.style.boxSizing="border-box",e.style.borderBottom="solid var(--lightgreen)",e.style.backgroundColor="var(--darkgray)",e.style.color="var(--white)",e.style.fontSize="small",e.style.transition="all 500ms linear",e.style.display="inline-block",e.placeholder="Valor...",e.value=t,e}createNameLabel(t){let e=document.createElement("p");return e.className="namebox",e.style.color="var(--white)",e.style.marginLeft="0.5em",e.style.paddingTop="1em",e.style.width="4em",e.style.height="2.5em",e.style.fontSize="smal",e.style.resize="none",e.style.overflow="hidden",e.style.display="inline-block",e.title=t,e.style.textAlign="right",e.textContent=t+":",e}toggleClassView(t){this.toggleValues(t).then(()=>{this.refreshView(this.imageService.img.name)})}toggleValues(t){return s(this,void 0,void 0,function*(){this.draswService.clases.forEach(e=>{0===t.localeCompare(e.name)&&(e.view=!e.view)})})}refreshView(t){console.log("refresque tags"),this.draswService.refreshContainer(t).then(()=>{this.draswService.myInteractive.remove(),this.imageService.images.forEach(e=>{0===e.name.localeCompare(t)&&(this.imageService.setImage(e),this.syncFunction(50).then(t=>{this.sidebarService.removeGlass();let e=document.getElementById("image");document.getElementById("image-box").style.marginTop="-"+e.clientHeight.toString()+"px",this.draswService.myInteractive.height=e.clientHeight,this.sidebarService.magniGlass("image")}))}),this.imageService.complexImages.forEach(e=>{e.name===t&&this.imageService.setComplex(e)}),this.draswService.myInteractive=new J("my-interactive"),this.draswService.myInteractive.width=1400;let e=document.getElementById("image");document.getElementById("image-box").style.marginTop="-"+e.clientHeight.toString()+"px",this.draswService.myInteractive.height=e.clientHeight,this.draswService.clearActiveShapes();let i=0,n=0,r=!1;this.draswService.shapeContainer.forEach(e=>{e.imgName!==t?i++:(n=i,r=!0)}),r&&this.draswService.shapeContainer[n].shapeList.forEach(t=>{this.draswService.crearFromData(t)})})}loadCsvClass(t){0!==t.length&&0==t[0].type.localeCompare("application/vnd.ms-excel")&&this.importData(t).then(t=>{this.syncFunction(50).then(e=>{t.forEach(t=>{let e=new et;e.name=t[0],e.shape=t[1],e.atribute=t[3],e.color=t[6],e.showName=t[7],e.view=!0,0===e.shape.localeCompare("box")?(e.width=parseInt(t[4]),e.height=parseInt(t[5])):0===e.shape.localeCompare("line")&&(e.lines=t[2]),this.draswService.crearClase(e)})})})}importData(t){return s(this,void 0,void 0,function*(){let e=[],i=0;return yield this.papa.parse(t[0],{header:!1,step:function(t){0!=i?""!=t.data&&e.push(t.data):i++}}),e})}toggleCreate(){this.draswService.toggleClassCreation()}changeActiveUpClass(t){const e=document.getElementById(t),i=e.parentElement.parentElement.getElementsByTagName("div"),n=e.style.display;for(let r=0;r<i.length;r++)"simpleContainer"===i[r].className&&(i[r].style.display="none");e.style.display="block"===n?"none":"block"}isEmpty(t){return 0===Object.keys(t).length}fillCategories(){const t=["idBase","idGeo"],e=["Base","Geotecnia"],i=["base","geo"];for(let n=0;n<t.length;n++){const r=new st;r.id=t[n],r.nombre=e[n],r.upClass=i[n],this.categories.push(r)}}}return t.\u0275fac=function(e){return new(e||t)(Q.Ob(at),Q.Ob(tt),Q.Ob(ht),Q.Ob(yt))},t.\u0275cmp=Q.Ib({type:t,selectors:[["app-draws"]],decls:42,vars:3,consts:[["rel","stylesheet","href",Q.Kc("https://vectorjs.org/library.css")],["href",Q.Kc("https://fonts.googleapis.com/icon?family=Material+Icons"),"rel","stylesheet"],[1,"container"],[1,"mainBlock"],[1,"block",2,"text-align","right"],[1,"block"],[1,"switch"],["id","toggle-class","type","checkbox",3,"click"],[1,"slider","round"],[1,"block",2,"text-align","left"],[1,"class-container"],[4,"ngFor","ngForOf"],["id","shape-selector",2,"display","none"],["id","boxselector",1,"active-button",3,"click"],["id","lineselector",1,"inactive-button",3,"click"],[2,"display","block"],["id","shape-management",2,"display","none"],["id","shape-creator",1,"active-button",3,"click"],["id","class_cretion_container",1,"class_creation",2,"display","none"],[2,"text-align","center","overflow","hidden"],["id","atribute_window"],[1,"btn-container",2,"display","none"],["id","csvClass-input","accept",".csv","type","file",1,"image_input",3,"change"],["csvClass",""],["for","csvClass-input","title","Importa un archivo .csv desde su dispositivo",2,"margin-left","1em","margin-top","0.5em"],["class","classDelete","id","classDeleteid","style","display: none;",4,"ngIf"],[2,"display","none"],["id","oriX"],["id","oriY"],[3,"click"],[1,"simpleContainer",2,"display","none",3,"id"],[3,"class",4,"ngIf"],["type","checkbox","checked","",1,"eye",3,"id","click"],["for","c1"],["type","radio","name","radio","value","clase.name",3,"id","click"],[1,"class_name"],["alt","",2,"float","right","max-height","1em","max-width","1em",3,"src"],["id","classDeleteid",1,"classDelete",2,"display","none"],["title","Eliminar clase.",1,"material-icons",3,"click"],["title","Cancelar eliminaci\xf3n.",1,"material-icons",3,"click"]],template:function(t,e){if(1&t){const t=Q.Vb();Q.Pb(0,"link",0),Q.Pb(1,"link",1),Q.Ub(2,"div",2),Q.Ub(3,"div",3),Q.Pb(4,"br"),Q.Ub(5,"div",4),Q.Gc(6," Editar "),Q.Tb(),Q.Ub(7,"div",5),Q.Ub(8,"label",6),Q.Ub(9,"input",7),Q.ec("click",function(){return e.toggleCreate()}),Q.Tb(),Q.Pb(10,"span",8),Q.Tb(),Q.Tb(),Q.Ub(11,"div",9),Q.Gc(12,"\xa0\xa0Crear"),Q.Tb(),Q.Tb(),Q.Pb(13,"br"),Q.Pb(14,"br"),Q.Ub(15,"div",10),Q.Ec(16,Ct,5,3,"div",11),Q.Tb(),Q.Tb(),Q.Ub(17,"div",12),Q.Ub(18,"button",13),Q.ec("click",function(){return e.show1("class-creation","line-creation","boxselector","lineselector")}),Q.Gc(19,"Box"),Q.Tb(),Q.Ub(20,"button",14),Q.ec("click",function(){return e.show1("line-creation","class-creation","lineselector","boxselector")}),Q.Gc(21,"Line"),Q.Tb(),Q.Tb(),Q.Ub(22,"div",15),Q.Pb(23,"br"),Q.Ub(24,"div",16),Q.Ub(25,"button",17),Q.ec("click",function(){return e.show1("class_cretion_container","class-edit-container","shape-creator","shape-editor")}),Q.Gc(26,"Crear"),Q.Tb(),Q.Tb(),Q.Ub(27,"div",18),Q.Ub(28,"h4",19),Q.Gc(29),Q.Tb(),Q.Pb(30,"div",20),Q.Tb(),Q.Ub(31,"div",21),Q.Ub(32,"input",22,23),Q.ec("change",function(){Q.yc(t);const i=Q.uc(33);return e.loadCsvClass(i.files)}),Q.Tb(),Q.Ub(34,"label",24),Q.Gc(35,"Importar clases"),Q.Tb(),Q.Tb(),Q.Ec(36,St,10,1,"div",25),Q.Ub(37,"div",26),Q.Ub(38,"textarea",27),Q.Gc(39,"100"),Q.Tb(),Q.Ub(40,"textarea",28),Q.Gc(41,"100"),Q.Tb(),Q.Tb(),Q.Tb()}2&t&&(Q.Bb(16),Q.nc("ngForOf",e.categories),Q.Bb(13),Q.Hc(e.draswService.clase.showName),Q.Bb(7),Q.nc("ngIf",e.show))},directives:[n.k,n.l],styles:['@font-face{font-family:myFont;src:url(/src/assets/font/AlrightSans-Medium-v3.otf)}.title[_ngcontent-%COMP%]{font-family:myFont;margin-left:1em;color:var(--white)}.class-container[_ngcontent-%COMP%]{margin-left:1em;margin-right:.4em}.classContainer[_ngcontent-%COMP%]{height:150px;background-color:var(--darkwhite);border-color:var(--orange);border-radius:10%;border-style:solid;max-width:180px;display:block;overflow-y:auto;margin-left:1em;margin-bottom:1em}ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0}.classContainer[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:var(--lightblack);font-size:small;padding-left:0;margin-left:3px;font-family:myFont}.classContainer[_ngcontent-%COMP%]   .classActive[_ngcontent-%COMP%], .lista[_ngcontent-%COMP%]:hover{color:var(--purple);font-weight:800;cursor:pointer}.btn[_ngcontent-%COMP%]{background-color:var(--lightgreen);padding:1em;border:solid var(--lightgreen);border-radius:4px;transition:all .5s ease;font-family:myFont;margin-bottom:1em}.btn[_ngcontent-%COMP%]:hover{background-color:var(--green);border-color:var(--green)}.shapecreate[_ngcontent-%COMP%]{background-color:var(--lightgreen);padding:.5em;border:solid var(--lightgreen);border-radius:4px;transition:all .5s ease;font-family:myFont;margin-bottom:1em;width:70%;margin-left:15%}.shapecreate[_ngcontent-%COMP%]:hover{background-color:var(--green);border-color:var(--green)}.colorLabel[_ngcontent-%COMP%]{font-size:medium}.delete[_ngcontent-%COMP%]{background-color:var(--lightorange);border:solid var(--lightorange)}.delete[_ngcontent-%COMP%]:hover{background-color:var(--orange);border-color:var(--orange)}.small[_ngcontent-%COMP%]{padding:.2em}.colorInput[_ngcontent-%COMP%]{margin-left:1em;margin-bottom:5px;background-color:#fff;border-style:solid;border-radius:10%;border-color:#90ee90;transition:all .25s ease;width:50%}.colorInput[_ngcontent-%COMP%]:hover{border-color:#fff;cursor:pointer}.text[_ngcontent-%COMP%]{border:none;resize:none;margin-left:1em;margin-bottom:.5em;width:5ch;height:4ch;box-sizing:border-box;font-size:small;border-bottom:solid var(--lightgreen);background-color:var(--darkgray);color:var(--white);transition:all .5s linear}.text[_ngcontent-%COMP%]:hover{background-color:var(--gray)}.text[_ngcontent-%COMP%]:focus{border:none;border-bottom:solid var(--green)}.name[_ngcontent-%COMP%]{border:none;resize:none;width:15ch;height:4ch;margin-left:1em;box-sizing:border-box;border-bottom:solid var(--lightgreen);background-color:var(--darkgray);color:var(--white);transition:all .5s linear}.name[_ngcontent-%COMP%]:hover{background-color:var(--gray)}.name[_ngcontent-%COMP%]:focus{border:none;border-bottom:solid var(--green)}.nameLabel[_ngcontent-%COMP%]{font-size:medium}label[_ngcontent-%COMP%]{margin-left:5px}a[_ngcontent-%COMP%]{position:absolute}.material-icons[_ngcontent-%COMP%]{background-color:var(--lightgreen);border:solid var(--lightgreen);border-radius:4px;transition:all .5s ease;margin-bottom:1em}.material-icons[_ngcontent-%COMP%]:first-child:hover{background-color:var(--green);border:solid var(--green)}.material-icons[_ngcontent-%COMP%]:nth-child(2):hover{background-color:var(--orange);border:solid var(--orange)}.alert[_ngcontent-%COMP%]{width:auto;height:auto;border-radius:15px;border:2px solid #fff;background-color:red;color:#fff;margin:5px;padding:5px;font-size:small}.closebtn[_ngcontent-%COMP%]{margin-left:1em;color:#fff;font-weight:700;font-size:22px;line-height:20px;cursor:pointer;transition:.3s}.closebtn[_ngcontent-%COMP%]:hover{color:#000}.classDelete[_ngcontent-%COMP%]{width:auto;height:auto;border-radius:15px;border:2px solid var(--darkwhite);background-color:var(--lightorange);color:var(--black);padding:5px;margin:5px}.radio-inline[_ngcontent-%COMP%]{margin-left:1em}.class_creation[_ngcontent-%COMP%]{margin-left:1em;width:80%;border:solid var(--green);background-color:var(--darkgray);margin-bottom:1em;color:var(--white);max-height:20em;overflow:auto}.atribute[_ngcontent-%COMP%]:first-child, .atribute[_ngcontent-%COMP%]:nth-child(2){margin-left:.5em;margin-top:.1em}.atributebox[_ngcontent-%COMP%]{box-sizing:border-box}.atributebox[_ngcontent-%COMP%], .namebox[_ngcontent-%COMP%]{border:none;resize:none;margin-left:1em;margin-bottom:10px;width:5em;height:2.5em;border-bottom:solid var(--lightgreen);background-color:var(--darkgray);color:var(--white);transition:all .5s linear}.namebox[_ngcontent-%COMP%]{font-size:small}.atributebox[_ngcontent-%COMP%]:focus, .atributebox[_ngcontent-%COMP%]:hover{border-color:green}.pointInput[_ngcontent-%COMP%]{border:none;resize:none;border-bottom:solid var(--lightgreen);background-color:var(--darkgray);margin-left:1em;margin-bottom:10px;width:3em}.pointInput[_ngcontent-%COMP%]:hover{cursor:default}.btn-container[_ngcontent-%COMP%]{margin-left:1em}.box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:var(--gray);color:var(--black);padding:12px;width:3.5em;font-family:myFont;box-shadow:var(--purple);outline:none;margin-left:30%;margin-top:1em;margin-bottom:1em;border-radius:4px;cursor:pointer;border:none}.box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{background-color:var(--orange)}.image_input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}.image_input[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{background-color:var(--lightgreen);padding:1em;border:solid var(--lightgreen);border-radius:4px;transition:all .5s ease;font-family:myFont}.image_input[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:hover{background-color:var(--green);border-color:var(--green);cursor:pointer}.block[_ngcontent-%COMP%], .mainBlock[_ngcontent-%COMP%]{box-sizing:border-box}.mainBlock[_ngcontent-%COMP%]{width:100%;height:2em}.block[_ngcontent-%COMP%]{height:2em;width:31%;max-width:31%;float:left;margin:0 1%;font-family:myFont;color:var(--white)}.switch[_ngcontent-%COMP%]{position:relative;width:4em;height:2em}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:var(--lightgray)}.slider[_ngcontent-%COMP%], .slider[_ngcontent-%COMP%]:before{position:absolute;transition:.4s}.slider[_ngcontent-%COMP%]:before{content:"";height:2em;width:2em;background-color:var(--white)}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:var(--green)}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px var(--green)}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translateX(2em)}.slider.round[_ngcontent-%COMP%]{border-radius:34px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}h5[_ngcontent-%COMP%]{margin-left:-.5em;text-decoration:none;font-size:20px;color:var(--lightgray);display:block;cursor:pointer;font-family:myFontMedium;transition:.25s linear;max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content}h5[_ngcontent-%COMP%]:hover{color:var(--darkgray);background-color:var(--gray)}h4[_ngcontent-%COMP%]{font-size:1em}.class_name[_ngcontent-%COMP%]{font-size:.7em}']}),t})();class kt extends g{constructor(t,e,i,n){let r=document.createElementNS("http://www.w3.org/2000/svg","line");r.setAttributeNS(null,"x1",t.toString()),r.setAttributeNS(null,"y1",e.toString()),r.setAttributeNS(null,"x2",i.toString()),r.setAttributeNS(null,"y2",n.toString()),super(r)}get x1(){return this.root.x1.baseVal.value}set x1(t){this.root.x1.baseVal.value=t}get y1(){return this.root.y1.baseVal.value}set y1(t){this.root.y1.baseVal.value=t}get x2(){return this.root.x2.baseVal.value}set x2(t){this.root.x2.baseVal.value=t}get y2(){return this.root.y2.baseVal.value}set y2(t){this.root.y2.baseVal.value=t}translate(t,e){this.root.x1.baseVal.value+=t,this.root.y1.baseVal.value+=e,this.root.x2.baseVal.value+=t,this.root.y2.baseVal.value+=e}get fill(){return this.root.style.fill}set fill(t){this.root.style.fill=t}get stroke(){return this.root.style.stroke}set stroke(t){this.root.style.stroke=t}}class Mt extends g{constructor(t,e,i,n){let r=document.createElementNS("http://www.w3.org/2000/svg","rect");r.setAttributeNS(null,"x",t.toString()),r.setAttributeNS(null,"y",e.toString()),r.setAttributeNS(null,"width",i.toString()),r.setAttributeNS(null,"height",n.toString()),super(r)}setAttribute(t,e){return this.root.setAttribute(t,e),this}getAttribute(t){return this.root.getAttribute(t)}get x(){return this.root.x.baseVal.value}set x(t){this.root.x.baseVal.value=t}get y(){return this.root.y.baseVal.value}set y(t){this.root.y.baseVal.value=t}get width(){return this.root.width.baseVal.value}set width(t){this.root.width.baseVal.value=t}get height(){return this.root.height.baseVal.value}set height(t){this.root.height.baseVal.value=t}translate(t,e){this.root.x.baseVal.value=this.root.x.baseVal.value+t,this.root.y.baseVal.value=this.root.y.baseVal.value+e}get fill(){return this.root.style.fill}set fill(t){this.root.style.fill=t}get stroke(){return this.root.style.stroke}set stroke(t){this.root.style.stroke=t}}let It=(()=>{class t{constructor(t,e,i,n){this.imageService=t,this.drawsService=e,this.sidebarService=i,this.papa=n}ngOnInit(){}resolveAfter2Seconds(t){return new Promise(e=>{setTimeout(()=>{e(t)},t)})}syncFunction(t){return s(this,void 0,void 0,function*(){const e=yield this.resolveAfter2Seconds(t),i=yield this.resolveAfter2Seconds(t);return t+e+i})}exportData(){let t=!1;this.drawsService.shapeContainer.forEach(e=>{e.shapeList.length>=1&&(t=!0)}),this.drawsService.activesShapes.length>=1||t?this.drawsService.exportData(this.imageService.img.name):console.log("Nada que exportar")}loadCSV(t){if(console.log(t),0===t.length)return;if(0!=t[0].type.localeCompare("application/vnd.ms-excel"))return;let e=[],i=[],n=0;this.papa.parse(t[0],{header:!1,step:function(t){0!=n?""!=t.data&&e.push(t.data):i.push(t.data),n++}}),this.syncFunction(500).then(t=>{this.createFrames(e).then(()=>{e.forEach(t=>{this.isEmpty(this.imageService.img)?this.loadEmpty(t):0===this.imageService.img.name.localeCompare(t[0])?this.loadFill(t):this.loadEmpty(t)})})})}isEmpty(t){return 0===Object.keys(t).length}loadEmpty(t){this.drawsService.shapeContainer.forEach(e=>{if(0===t[0].localeCompare(e.imgName)){let i=new it,n=1400/e.width;i.imgName=t[0],i.activo=!0,i.clase=t[3],i.shapeType=t[4];let r=t[5].replace("{","");if(r=r.replace("}",""),r=r.replace(/\"/g,""),i.atribute=r,i.color=t[11],i.shapeLine=[],0===i.shapeType.localeCompare("box")){let e=Math.floor(n*t[7]),r=Math.floor(n*t[8]),s=Math.floor(n*t[9]),o=Math.floor(n*t[10]);i.shape=new Mt(e,r,s,o)}else if(0===i.shapeType.localeCompare("line")){let e=t[7].replace(/\"/g,""),r=t[8].replace(/\"/g,""),s=this.drawsService.splitAtributeDataService(e,","),o=this.drawsService.splitAtributeDataService(r,","),a=s.length/2;for(let t=0;t<s.length;t+=2){let e=Math.floor(parseInt(s[t])*n),r=Math.floor(parseInt(s[t+1])*n),a=Math.floor(parseInt(o[t])*n),h=Math.floor(parseInt(o[t+1])*n),l=new kt(e,a,r,h);i.shapeLine.push(l)}i.lines=a.toString()}else if(0===i.shapeType.localeCompare("arrow")){let e=Math.floor(n*t[7]),r=Math.floor(n*t[8]);i.shape=new Mt(e,r,0,0)}e.shapeList.push(i)}})}loadFill(t){let e=new it,i=1400/parseInt(this.imageService.complexImg.width);e.imgName=t[0],e.activo=!0,e.clase=t[3],e.shapeType=t[4];let n=t[5].replace("{","");if(n=n.replace("}",""),n=n.replace(/\"/g,""),e.atribute=n,e.color=t[11],e.shapeLine=[],0===e.shapeType.localeCompare("box")){let n=Math.floor(i*t[7]),r=Math.floor(i*t[8]),s=Math.floor(i*t[9]),o=Math.floor(i*t[10]);e.shape=new Mt(n,r,s,o)}else if(0===e.shapeType.localeCompare("line")){let n=t[7].replace(/\"/g,""),r=t[8].replace(/\"/g,""),s=this.drawsService.splitAtributeDataService(n,","),o=this.drawsService.splitAtributeDataService(r,","),a=s.length/2;for(let t=0;t<s.length;t+=2){let n=Math.floor(parseInt(s[t])*i),r=Math.floor(parseInt(s[t+1])*i),a=Math.floor(parseInt(o[t])*i),h=Math.floor(parseInt(o[t+1])*i),l=new kt(n,a,r,h);e.shapeLine.push(l)}e.lines=a.toString()}else if(0===e.shapeType.localeCompare("arrow")){let n=Math.floor(i*t[7]),r=Math.floor(i*t[8]);e.shape=new Mt(n,r,0,0),console.log(n,r)}this.drawsService.crearFromData(e)}createFrames(t){return s(this,void 0,void 0,function*(){t.forEach(t=>{let e=!0,i=!0;if(this.drawsService.shapeContainer.forEach(i=>{0===t[0].localeCompare(i.imgName)&&(e=!1)}),this.drawsService.clases.forEach(e=>{0===t[3].localeCompare(e.name)&&(i=!1)}),e){let e=new rt;e.imgName=t[0],e.height=t[1],e.width=t[2],e.shapeList=[],this.drawsService.shapeContainer.push(e)}if(i){let e=new et;e.name=t[3],e.shape=t[4],e.color=t[11];let i=t[5].replace("{","");if(i=i.replace("}",""),i=i.replace(/\"/g,""),e.atribute=i,e.view=!0,0===e.shape.localeCompare("box"))e.width=60,e.height=60;else{let i=t[7].replace(/\"/g,"");i=this.drawsService.splitAtributeDataService(i,","),e.lines=(i.length/2).toString()}this.drawsService.clases.push(e)}})})}}return t.\u0275fac=function(e){return new(e||t)(Q.Ob(tt),Q.Ob(at),Q.Ob(ht),Q.Ob(yt))},t.\u0275cmp=Q.Ib({type:t,selectors:[["app-imports"]],decls:8,vars:0,consts:[["id","button-exports",1,"btn-container"],["id","csv-input","accept",".csv","type","file",1,"image_input",3,"change"],["csv",""],["for","csv-input","title","Importa un archivo .csv desde su dispositivo",2,"margin-left","1em","margin-top","0.5em"],["title","Exportar datos de clases en formato .csv",1,"btn","export",3,"click"]],template:function(t,e){if(1&t){const t=Q.Vb();Q.Ub(0,"div",0),Q.Ub(1,"input",1,2),Q.ec("change",function(){Q.yc(t);const i=Q.uc(2);return e.loadCSV(i.files)}),Q.Tb(),Q.Ub(3,"label",3),Q.Gc(4,"Importar datos"),Q.Tb(),Q.Pb(5,"br"),Q.Ub(6,"button",4),Q.ec("click",function(){return e.exportData()}),Q.Gc(7,"Exportar datos"),Q.Tb(),Q.Tb()}},styles:[".button-container[_ngcontent-%COMP%]{margin-left:1em}.btn[_ngcontent-%COMP%]{background-color:var(--lightorange);padding:1em;border:solid var(--lightorange);transition:all .5s ease;font-family:myFont}.btn[_ngcontent-%COMP%]:hover{background:var(--orange);border-color:var(--orange)}.export[_ngcontent-%COMP%]{background-color:var(--lightgreen);border-color:var(--lightgreen);margin-left:1em}.export[_ngcontent-%COMP%]:hover{background-color:var(--green);border-color:var(--green)}"]}),t})();const At='.sidenav[_ngcontent-%COMP%]{height:100%;width:15%;position:fixed;z-index:1;top:0;left:0;background-color:var(--darkgray);overflow-x:hidden;padding-top:20px;min-width:15em}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:6px 8px 6px 16px;text-decoration:none;font-size:25px;color:var(--white);display:block;cursor:pointer;font-family:myFontMedium;transition:.25s linear;max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--lightgray);background-color:var(--gray)}.sidenav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px 10px 1px 20px;text-decoration:none;font-size:15px;color:var(--black);display:block;cursor:pointer;transition:.25s linear;font-family:myFont}.sidenav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{color:var(--lightgray)}.switch[_ngcontent-%COMP%]{position:absolute;width:4em;height:2em;margin-left:1em;margin-top:1.5em}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:var(--lightgray)}.slider[_ngcontent-%COMP%], .slider[_ngcontent-%COMP%]:before{position:absolute;transition:.4s}.slider[_ngcontent-%COMP%]:before{content:"";height:2em;width:2em;background-color:var(--white)}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:var(--green)}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px var(--green)}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translateX(2em)}.slider.round[_ngcontent-%COMP%]{border-radius:34px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}.box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:var(--gray);color:var(--black);padding:12px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;font-family:myFont;box-shadow:var(--purple);outline:none;margin-left:1em;margin-top:1em;margin-bottom:1em;border-radius:4px;cursor:pointer;border:none}.box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{background-color:var(--orange)}.text[_ngcontent-%COMP%]{font-family:myFont;color:var(--white);margin-left:1.5em;margin-bottom:0}';let Ot=(()=>{class t{constructor(t){this.sidebarService=t}ngOnInit(){}changeDisplay(t){"none"==document.getElementById(t).style.display?document.getElementById(t).style.display="block":document.getElementById(t).style.display="none"}removezoom(){this.sidebarService.removeGlass()}magnifier(t){this.sidebarService.magniGlass(t)}activate(){this.sidebarService.changeGlass()}}return t.\u0275fac=function(e){return new(e||t)(Q.Ob(ht))},t.\u0275cmp=Q.Ib({type:t,selectors:[["app-sidebar"]],decls:13,vars:0,consts:[[1,"sidenav"],[2,"margin-top","2em",3,"click"],["id","images",2,"display","none"],[3,"click"],["id","clases",2,"display","none"],["id","import",2,"display","none"]],template:function(t,e){1&t&&(Q.Ub(0,"div",0),Q.Ub(1,"a",1),Q.ec("click",function(){return e.changeDisplay("images")}),Q.Gc(2,"Im\xe1genes"),Q.Tb(),Q.Ub(3,"div",2),Q.Pb(4,"app-imagebar"),Q.Tb(),Q.Ub(5,"a",3),Q.ec("click",function(){return e.changeDisplay("clases")}),Q.Gc(6,"Etiquetas"),Q.Tb(),Q.Ub(7,"div",4),Q.Pb(8,"app-draws"),Q.Tb(),Q.Ub(9,"a",3),Q.ec("click",function(){return e.changeDisplay("import")}),Q.Gc(10,"Datos"),Q.Tb(),Q.Ub(11,"div",5),Q.Pb(12,"app-imports"),Q.Tb(),Q.Tb())},directives:[wt,Et,It],styles:[At,At]}),t})();const Pt="@import url(https://fonts.googleapis.com/css?family=Varela+Round);@import url(https://fonts.googleapis.com/css?family=Finger+Paint);@import url(https://fonts.googleapis.com/css?family=Montserrat);body[_ngcontent-%COMP%]{min-height:-webkit-max-content;min-height:max-content;min-width:100%}.container[_ngcontent-%COMP%]{display:grid;min-width:100%;padding:0}.even-columns[_ngcontent-%COMP%]{display:flex}.even-columns[_ngcontent-%COMP%], app-navbar[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:3}app-navbar[_ngcontent-%COMP%]{z-index:10}.even-columns[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child{flex:1 1 10%;min-width:15em;max-width:20em;margin-right:-50px}.even-columns[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(2){margin-left:2em;flex:1 1 90%;position:relative}img[_ngcontent-%COMP%]{width:1400px}.drawBox[_ngcontent-%COMP%]{z-index:2}.drawBox[_ngcontent-%COMP%], .imageBox[_ngcontent-%COMP%]{position:relative;width:1400px;transform-origin:0 0}.imageBox[_ngcontent-%COMP%]{z-index:1}.sideBar[_ngcontent-%COMP%]{z-index:3}.draw-container[_ngcontent-%COMP%]{margin-top:2em;margin-left:5em;transform-origin:0 0;max-width:1418px;max-height:800px;width:10px}.img-magnifier-glass[_ngcontent-%COMP%]{position:relative;z-index:4;transform-origin:0 0;border:3px solid var(--orange);border-radius:1em;cursor:default;width:100px;height:100px}",Lt=[{path:"",component:(()=>{class t{constructor(t,e,i,n){this.route=t,this.imageService=e,this.drawsService=i,this.sidebarService=n}ngOnInit(){this.route.queryParams.subscribe(t=>{this.name=t.name})}crearForma(){this.drawsService.crearShape(this.imageService.img.name)}handleKeyboardEvent(t){0===t.key.localeCompare("Shift")&&document.getElementById("toggle-class").click()}imageSelect(t){this.drawsService.refreshContainer(this.imageService.img.name).then(()=>{this.drawsService.myInteractive.remove(),this.imageService.images.forEach(e=>{0===e.name.localeCompare(t)&&(this.imageService.setImage(e),this.syncFunction(50).then(t=>{this.sidebarService.removeGlass();let e=document.getElementById("image");document.getElementById("image-box").style.marginTop="-"+e.clientHeight.toString()+"px",this.drawsService.myInteractive.height=e.clientHeight,this.sidebarService.magniGlass("image")}))}),this.imageService.complexImages.forEach(e=>{0===e.name.localeCompare(t)&&this.imageService.setComplex(e)}),this.drawsService.myInteractive=new J("my-interactive"),this.drawsService.myInteractive.width=1400,this.drawsService.myInteractive.window=!1;let e=document.getElementById("image");document.getElementById("image-box").style.marginTop="-"+e.clientHeight.toString()+"px",this.drawsService.myInteractive.height=e.clientHeight,this.drawsService.clearActiveShapes();let i=0,n=0,r=!1;this.drawsService.shapeContainer.forEach(e=>{e.imgName!==t?i++:(n=i,r=!0)}),r&&this.drawsService.shapeContainer[n].shapeList.forEach(t=>{this.drawsService.crearFromData(t)})})}resolveAfter2Seconds(t){return new Promise(e=>{setTimeout(()=>{e(t)},t)})}syncFunction(t){return s(this,void 0,void 0,function*(){const e=yield this.resolveAfter2Seconds(t),i=yield this.resolveAfter2Seconds(t);return t+e+i})}}return t.\u0275fac=function(e){return new(e||t)(Q.Ob(r.a),Q.Ob(tt),Q.Ob(at),Q.Ob(ht))},t.\u0275cmp=Q.Ib({type:t,selectors:[["app-main"]],hostBindings:function(t,e){1&t&&Q.ec("keydown",function(t){return e.handleKeyboardEvent(t)},!1,Q.xc)},decls:10,vars:1,consts:[[1,"container"],[1,"even-columns"],["id","draw_container_id",1,"draw-container",3,"click"],["id","my-interactive",1,"drawBox"],["id","image-box",1,"imageBox"],["id","image",3,"src"]],template:function(t,e){1&t&&(Q.Ub(0,"body"),Q.Ub(1,"div",0),Q.Pb(2,"app-navbar"),Q.Ub(3,"div",1),Q.Pb(4,"app-sidebar"),Q.Ub(5,"div"),Q.Ub(6,"div",2),Q.ec("click",function(){return e.drawsService.shapeEvent()}),Q.Pb(7,"div",3),Q.Ub(8,"div",4),Q.Pb(9,"img",5),Q.Tb(),Q.Tb(),Q.Tb(),Q.Tb(),Q.Tb(),Q.Tb()),2&t&&(Q.Bb(9),Q.nc("src",e.imageService.img.imgURL,Q.zc))},directives:[gt,Ot],styles:[Pt,Pt]}),t})()},{path:"**",redirectTo:""}];let Tt=(()=>{class t{}return t.\u0275mod=Q.Mb({type:t}),t.\u0275inj=Q.Lb({factory:function(e){return new(e||t)},imports:[[r.b.forChild(Lt)],r.b]}),t})(),Bt=(()=>{class t{}return t.\u0275mod=Q.Mb({type:t}),t.\u0275inj=Q.Lb({factory:function(e){return new(e||t)},providers:[],imports:[[n.c,Tt]]}),t})()},J5zx:function(t,e,i){(function(t){var n,r;void 0===(r="function"==typeof(n=function(){"use strict";var e={},n=null;function r(e){if(t&&t.exports)try{return i(!function(){var t=new Error("Cannot find module 'crypto'");throw t.code="MODULE_NOT_FOUND",t}()).randomBytes(e)}catch(s){}try{var r;return(self.crypto||self.msCrypto).getRandomValues(r=new Uint32Array(e)),Array.prototype.slice.call(r)}catch(s){}if(!n)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return n(e)}try{r(1)}catch(C){}function s(t,e){for(var i=0,n=0,r=0,s=t.length;r<s;++r)t.charCodeAt(r)===e.charCodeAt(r)?++i:++n;return!(i<0)&&0===n}n=null,e.setRandomFallback=function(t){n=t},e.genSaltSync=function(t,e){if("number"!=typeof(t=t||g))throw Error("Illegal arguments: "+typeof t+", "+typeof e);t<4?t=4:t>31&&(t=31);var i=[];return i.push("$2a$"),t<10&&i.push("0"),i.push(t.toString()),i.push("$"),i.push(c(r(p),p)),i.join("")},e.genSalt=function(t,i,n){if("function"==typeof i&&(n=i,i=void 0),"function"==typeof t&&(n=t,t=void 0),void 0===t)t=g;else if("number"!=typeof t)throw Error("illegal arguments: "+typeof t);function r(i){o(function(){try{i(null,e.genSaltSync(t))}catch(n){i(n)}})}if(!n)return new Promise(function(t,e){r(function(i,n){i?e(i):t(n)})});if("function"!=typeof n)throw Error("Illegal callback: "+typeof n);r(n)},e.hashSync=function(t,i){if(void 0===i&&(i=g),"number"==typeof i&&(i=e.genSaltSync(i)),"string"!=typeof t||"string"!=typeof i)throw Error("Illegal arguments: "+typeof t+", "+typeof i);return _(t,i)},e.hash=function(t,i,n,r){function s(n){"string"==typeof t&&"number"==typeof i?e.genSalt(i,function(e,i){_(t,i,n,r)}):"string"==typeof t&&"string"==typeof i?_(t,i,n,r):o(n.bind(this,Error("Illegal arguments: "+typeof t+", "+typeof i)))}if(!n)return new Promise(function(t,e){s(function(i,n){i?e(i):t(n)})});if("function"!=typeof n)throw Error("Illegal callback: "+typeof n);s(n)},e.compareSync=function(t,i){if("string"!=typeof t||"string"!=typeof i)throw Error("Illegal arguments: "+typeof t+", "+typeof i);return 60===i.length&&s(e.hashSync(t,i.substr(0,i.length-31)),i)},e.compare=function(t,i,n,r){function a(n){"string"==typeof t&&"string"==typeof i?60===i.length?e.hash(t,i.substr(0,29),function(t,e){t?n(t):n(null,s(e,i))},r):o(n.bind(this,null,!1)):o(n.bind(this,Error("Illegal arguments: "+typeof t+", "+typeof i)))}if(!n)return new Promise(function(t,e){a(function(i,n){i?e(i):t(n)})});if("function"!=typeof n)throw Error("Illegal callback: "+typeof n);a(n)},e.getRounds=function(t){if("string"!=typeof t)throw Error("Illegal arguments: "+typeof t);return parseInt(t.split("$")[2],10)},e.getSalt=function(t){if("string"!=typeof t)throw Error("Illegal arguments: "+typeof t);if(60!==t.length)throw Error("Illegal hash length: "+t.length+" != 60");return t.substring(0,29)};var o="undefined"!=typeof process&&process&&"function"==typeof process.nextTick?"function"==typeof setImmediate?setImmediate:process.nextTick:setTimeout,a="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),h=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1],l=String.fromCharCode;function c(t,e){var i,n,r=0,s=[];if(e<=0||e>t.length)throw Error("Illegal len: "+e);for(;r<e;){if(i=255&t[r++],s.push(a[i>>2&63]),i=(3&i)<<4,r>=e){s.push(a[63&i]);break}if(n=255&t[r++],s.push(a[63&(i|=n>>4&15)]),i=(15&n)<<2,r>=e){s.push(a[63&i]);break}n=255&t[r++],s.push(a[63&(i|=n>>6&3)]),s.push(a[63&n])}return s.join("")}function d(t,e){var i,n,r,s,o,a=0,c=t.length,d=0,u=[];if(e<=0)throw Error("Illegal len: "+e);for(;a<c-1&&d<e&&(i=(o=t.charCodeAt(a++))<h.length?h[o]:-1,n=(o=t.charCodeAt(a++))<h.length?h[o]:-1,-1!=i&&-1!=n)&&(s=i<<2>>>0,u.push(l(s|=(48&n)>>4)),!(++d>=e||a>=c))&&-1!=(r=(o=t.charCodeAt(a++))<h.length?h[o]:-1)&&(s=(15&n)<<4>>>0,u.push(l(s|=(60&r)>>2)),!(++d>=e||a>=c));)o=t.charCodeAt(a++),s=(3&r)<<6>>>0,u.push(l(s|=o<h.length?h[o]:-1)),++d;var p=[];for(a=0;a<d;a++)p.push(u[a].charCodeAt(0));return p}var u=function(){var t={MAX_CODEPOINT:1114111,encodeUTF8:function(t,e){var i=null;for("number"==typeof t&&(i=t,t=function(){return null});null!==i||null!==(i=t());)i<128?e(127&i):i<2048?(e(i>>6&31|192),e(63&i|128)):i<65536?(e(i>>12&15|224),e(i>>6&63|128),e(63&i|128)):(e(i>>18&7|240),e(i>>12&63|128),e(i>>6&63|128),e(63&i|128)),i=null},decodeUTF8:function(t,e){for(var i,n,r,s,o=function(t){t=t.slice(0,t.indexOf(null));var e=Error(t.toString());throw e.name="TruncatedError",e.bytes=t,e};null!==(i=t());)if(0==(128&i))e(i);else if(192==(224&i))null===(n=t())&&o([i,n]),e((31&i)<<6|63&n);else if(224==(240&i))(null===(n=t())||null===(r=t()))&&o([i,n,r]),e((15&i)<<12|(63&n)<<6|63&r);else{if(240!=(248&i))throw RangeError("Illegal starting byte: "+i);(null===(n=t())||null===(r=t())||null===(s=t()))&&o([i,n,r,s]),e((7&i)<<18|(63&n)<<12|(63&r)<<6|63&s)}},UTF16toUTF8:function(t,e){for(var i,n=null;null!==(i=null!==n?n:t());)i>=55296&&i<=57343&&null!==(n=t())&&n>=56320&&n<=57343?(e(1024*(i-55296)+n-56320+65536),n=null):e(i);null!==n&&e(n)},UTF8toUTF16:function(t,e){var i=null;for("number"==typeof t&&(i=t,t=function(){return null});null!==i||null!==(i=t());)i<=65535?e(i):(e(55296+((i-=65536)>>10)),e(i%1024+56320)),i=null},encodeUTF16toUTF8:function(e,i){t.UTF16toUTF8(e,function(e){t.encodeUTF8(e,i)})},decodeUTF8toUTF16:function(e,i){t.decodeUTF8(e,function(e){t.UTF8toUTF16(e,i)})},calculateCodePoint:function(t){return t<128?1:t<2048?2:t<65536?3:4},calculateUTF8:function(e){for(var i,n=0;null!==(i=e());)n+=t.calculateCodePoint(i);return n},calculateUTF16asUTF8:function(e){var i=0,n=0;return t.UTF16toUTF8(e,function(e){++i,n+=t.calculateCodePoint(e)}),[i,n]}};return t}();Date.now=Date.now||function(){return+new Date};var p=16,g=10,m=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],f=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],y=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function v(t,e,i,n){var r,s=t[e],o=t[e+1];return r=n[(s^=i[0])>>>24],r+=n[256|s>>16&255],r^=n[512|s>>8&255],r=n[(o^=(r+=n[768|255&s])^i[1])>>>24],r+=n[256|o>>16&255],r^=n[512|o>>8&255],r=n[(s^=(r+=n[768|255&o])^i[2])>>>24],r+=n[256|s>>16&255],r^=n[512|s>>8&255],r=n[(o^=(r+=n[768|255&s])^i[3])>>>24],r+=n[256|o>>16&255],r^=n[512|o>>8&255],r=n[(s^=(r+=n[768|255&o])^i[4])>>>24],r+=n[256|s>>16&255],r^=n[512|s>>8&255],r=n[(o^=(r+=n[768|255&s])^i[5])>>>24],r+=n[256|o>>16&255],r^=n[512|o>>8&255],r=n[(s^=(r+=n[768|255&o])^i[6])>>>24],r+=n[256|s>>16&255],r^=n[512|s>>8&255],r=n[(o^=(r+=n[768|255&s])^i[7])>>>24],r+=n[256|o>>16&255],r^=n[512|o>>8&255],r=n[(s^=(r+=n[768|255&o])^i[8])>>>24],r+=n[256|s>>16&255],r^=n[512|s>>8&255],r=n[(o^=(r+=n[768|255&s])^i[9])>>>24],r+=n[256|o>>16&255],r^=n[512|o>>8&255],r=n[(s^=(r+=n[768|255&o])^i[10])>>>24],r+=n[256|s>>16&255],r^=n[512|s>>8&255],r=n[(o^=(r+=n[768|255&s])^i[11])>>>24],r+=n[256|o>>16&255],r^=n[512|o>>8&255],r=n[(s^=(r+=n[768|255&o])^i[12])>>>24],r+=n[256|s>>16&255],r^=n[512|s>>8&255],r=n[(o^=(r+=n[768|255&s])^i[13])>>>24],r+=n[256|o>>16&255],r^=n[512|o>>8&255],r=n[(s^=(r+=n[768|255&o])^i[14])>>>24],r+=n[256|s>>16&255],r^=n[512|s>>8&255],r=n[(o^=(r+=n[768|255&s])^i[15])>>>24],r+=n[256|o>>16&255],r^=n[512|o>>8&255],s^=(r+=n[768|255&o])^i[16],t[e]=o^i[17],t[e+1]=s,t}function b(t,e){for(var i=0,n=0;i<4;++i)n=n<<8|255&t[e],e=(e+1)%t.length;return{key:n,offp:e}}function w(t,e,i){for(var n,r=0,s=[0,0],o=e.length,a=i.length,h=0;h<o;h++)r=(n=b(t,r)).offp,e[h]=e[h]^n.key;for(h=0;h<o;h+=2)s=v(s,0,e,i),e[h]=s[0],e[h+1]=s[1];for(h=0;h<a;h+=2)s=v(s,0,e,i),i[h]=s[0],i[h+1]=s[1]}function x(t,e,i,n,r){var s,a=y.slice(),h=a.length;if(i<4||i>31){if(s=Error("Illegal number of rounds (4-31): "+i),n)return void o(n.bind(this,s));throw s}if(e.length!==p){if(s=Error("Illegal salt length: "+e.length+" != "+p),n)return void o(n.bind(this,s));throw s}i=1<<i>>>0;var l,c,d,u=0;function g(){if(r&&r(u/i),!(u<i)){for(u=0;u<64;u++)for(d=0;d<h>>1;d++)v(a,d<<1,l,c);var s=[];for(u=0;u<h;u++)s.push((a[u]>>24&255)>>>0),s.push((a[u]>>16&255)>>>0),s.push((a[u]>>8&255)>>>0),s.push((255&a[u])>>>0);return n?void n(null,s):s}for(var p=Date.now();u<i&&(u+=1,w(t,l,c),w(e,l,c),!(Date.now()-p>100)););n&&o(g)}if(Int32Array?(l=new Int32Array(m),c=new Int32Array(f)):(l=m.slice(),c=f.slice()),function(t,e,i,n){for(var r,s=0,o=[0,0],a=i.length,h=n.length,l=0;l<a;l++)s=(r=b(e,s)).offp,i[l]=i[l]^r.key;for(s=0,l=0;l<a;l+=2)s=(r=b(t,s)).offp,o[0]^=r.key,s=(r=b(t,s)).offp,o[1]^=r.key,o=v(o,0,i,n),i[l]=o[0],i[l+1]=o[1];for(l=0;l<h;l+=2)s=(r=b(t,s)).offp,o[0]^=r.key,s=(r=b(t,s)).offp,o[1]^=r.key,o=v(o,0,i,n),n[l]=o[0],n[l+1]=o[1]}(e,t,l,c),void 0!==n)g();else for(var x;;)if(void 0!==(x=g()))return x||[]}function _(t,e,i,n){var r,s,a;if("string"!=typeof t||"string"!=typeof e){if(r=Error("Invalid string / salt: Not a string"),i)return void o(i.bind(this,r));throw r}if("$"!==e.charAt(0)||"2"!==e.charAt(1)){if(r=Error("Invalid salt version: "+e.substring(0,2)),i)return void o(i.bind(this,r));throw r}if("$"===e.charAt(2))s=String.fromCharCode(0),a=3;else{if("a"!==(s=e.charAt(2))&&"b"!==s&&"y"!==s||"$"!==e.charAt(3)){if(r=Error("Invalid salt revision: "+e.substring(2,4)),i)return void o(i.bind(this,r));throw r}a=4}if(e.charAt(a+2)>"$"){if(r=Error("Missing salt rounds"),i)return void o(i.bind(this,r));throw r}var h,l,g,m=10*parseInt(e.substring(a,a+1),10)+parseInt(e.substring(a+1,a+2),10),f=e.substring(a+3,a+25),v=(h=t+=s>="a"?"\0":"",l=[],g=0,u.encodeUTF16toUTF8(function(){return g>=h.length?null:h.charCodeAt(g++)},function(t){l.push(t)}),l),b=d(f,p);function w(t){var e=[];return e.push("$2"),s>="a"&&e.push(s),e.push("$"),m<10&&e.push("0"),e.push(m.toString()),e.push("$"),e.push(c(b,b.length)),e.push(c(t,4*y.length-1)),e.join("")}if(void 0===i)return w(x(v,b,m));x(v,b,m,function(t,e){t?i(t,null):i(null,w(e))},n)}return e.encodeBase64=c,e.decodeBase64=d,e})?n.apply(e,[]):n)||(t.exports=r)}).call(this,i("YuTi")(t))},NpuA:function(t,e,i){var n,r;void 0===(r="function"==typeof(n=function t(){"use strict";var e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},i=!e.document&&!!e.postMessage,n=i&&/blob:/i.test((e.location||{}).protocol),r={},s=0,o={parse:function(i,n){var a=(n=n||{}).dynamicTyping||!1;if(x(a)&&(n.dynamicTypingFunction=a,a={}),n.dynamicTyping=a,n.transform=!!x(n.transform)&&n.transform,n.worker&&o.WORKERS_SUPPORTED){var h=function(){if(!o.WORKERS_SUPPORTED)return!1;var i,n,a=(i=e.URL||e.webkitURL||null,n=t.toString(),o.BLOB_URL||(o.BLOB_URL=i.createObjectURL(new Blob(["(",n,")();"],{type:"text/javascript"})))),h=new e.Worker(a);return h.onmessage=f,h.id=s++,r[h.id]=h}();return h.userStep=n.step,h.userChunk=n.chunk,h.userComplete=n.complete,h.userError=n.error,n.step=x(n.step),n.chunk=x(n.chunk),n.complete=x(n.complete),n.error=x(n.error),delete n.worker,void h.postMessage({input:i,config:n,workerId:h.id})}var p=null;return"string"==typeof i?p=n.download?new l(n):new d(n):!0===i.readable&&x(i.read)&&x(i.on)?p=new u(n):(e.File&&i instanceof File||i instanceof Object)&&(p=new c(n)),p.stream(i)},unparse:function(t,e){var i=!1,n=!0,r=",",s="\r\n",a='"',h=a+a,l=!1,c=null,d=!1;!function(){if("object"==typeof e){if("string"!=typeof e.delimiter||o.BAD_DELIMITERS.filter(function(t){return-1!==e.delimiter.indexOf(t)}).length||(r=e.delimiter),("boolean"==typeof e.quotes||"function"==typeof e.quotes||Array.isArray(e.quotes))&&(i=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(l=e.skipEmptyLines),"string"==typeof e.newline&&(s=e.newline),"string"==typeof e.quoteChar&&(a=e.quoteChar),"boolean"==typeof e.header&&(n=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");c=e.columns}void 0!==e.escapeChar&&(h=e.escapeChar+a),"boolean"==typeof e.escapeFormulae&&(d=e.escapeFormulae)}}();var u=new RegExp(g(a),"g");if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return m(null,t,l);if("object"==typeof t[0])return m(c||p(t[0]),t,l)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:p(t.data[0])),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),m(t.fields||[],t.data||[],l);throw new Error("Unable to serialize unrecognized input");function p(t){if("object"!=typeof t)return[];var e=[];for(var i in t)e.push(i);return e}function m(t,e,i){var o="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var a=Array.isArray(t)&&0<t.length,h=!Array.isArray(e[0]);if(a&&n){for(var l=0;l<t.length;l++)0<l&&(o+=r),o+=f(t[l],l);0<e.length&&(o+=s)}for(var c=0;c<e.length;c++){var d=a?t.length:e[c].length,u=!1,p=a?0===Object.keys(e[c]).length:0===e[c].length;if(i&&!a&&(u="greedy"===i?""===e[c].join("").trim():1===e[c].length&&0===e[c][0].length),"greedy"===i&&a){for(var g=[],m=0;m<d;m++)g.push(e[c][h?t[m]:m]);u=""===g.join("").trim()}if(!u){for(var y=0;y<d;y++)0<y&&!p&&(o+=r),o+=f(e[c][a&&h?t[y]:y],y);c<e.length-1&&(!i||0<d&&!p)&&(o+=s)}}return o}function f(t,e){if(null==t)return"";if(t.constructor===Date)return JSON.stringify(t).slice(1,25);!0===d&&"string"==typeof t&&null!==t.match(/^[=+\-@].*$/)&&(t="'"+t);var n=t.toString().replace(u,h);return"boolean"==typeof i&&i||"function"==typeof i&&i(t,e)||Array.isArray(i)&&i[e]||function(t,e){for(var i=0;i<e.length;i++)if(-1<t.indexOf(e[i]))return!0;return!1}(n,o.BAD_DELIMITERS)||-1<n.indexOf(r)||" "===n.charAt(0)||" "===n.charAt(n.length-1)?a+n+a:n}}};if(o.RECORD_SEP=String.fromCharCode(30),o.UNIT_SEP=String.fromCharCode(31),o.BYTE_ORDER_MARK="\ufeff",o.BAD_DELIMITERS=["\r","\n",'"',o.BYTE_ORDER_MARK],o.WORKERS_SUPPORTED=!i&&!!e.Worker,o.NODE_STREAM_INPUT=1,o.LocalChunkSize=10485760,o.RemoteChunkSize=5242880,o.DefaultDelimiter=",",o.Parser=m,o.ParserHandle=p,o.NetworkStreamer=l,o.FileStreamer=c,o.StringStreamer=d,o.ReadableStreamStreamer=u,e.jQuery){var a=e.jQuery;a.fn.parse=function(t){var i=t.config||{},n=[];return this.each(function(t){if("INPUT"!==a(this).prop("tagName").toUpperCase()||"file"!==a(this).attr("type").toLowerCase()||!e.FileReader||!this.files||0===this.files.length)return!0;for(var r=0;r<this.files.length;r++)n.push({file:this.files[r],inputElem:this,instanceConfig:a.extend({},i)})}),r(),this;function r(){if(0!==n.length){var e,i,r,h=n[0];if(x(t.before)){var l=t.before(h.file,h.inputElem);if("object"==typeof l){if("abort"===l.action)return e=h.file,i=h.inputElem,r=l.reason,void(x(t.error)&&t.error({name:"AbortError"},e,i,r));if("skip"===l.action)return void s();"object"==typeof l.config&&(h.instanceConfig=a.extend(h.instanceConfig,l.config))}else if("skip"===l)return void s()}var c=h.instanceConfig.complete;h.instanceConfig.complete=function(t){x(c)&&c(t,h.file,h.inputElem),s()},o.parse(h.file,h.instanceConfig)}else x(t.complete)&&t.complete()}function s(){n.splice(0,1),r()}}}function h(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(t){var e=b(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new p(e),(this._handle.streamer=this)._config=e}).call(this,t),this.parseChunk=function(t,i){if(this.isFirstChunk&&x(this._config.beforeFirstChunk)){var r=this._config.beforeFirstChunk(t);void 0!==r&&(t=r)}this.isFirstChunk=!1,this._halted=!1;var s=this._partialLine+t;this._partialLine="";var a=this._handle.parse(s,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var h=a.meta.cursor;this._finished||(this._partialLine=s.substring(h-this._baseIndex),this._baseIndex=h),a&&a.data&&(this._rowCount+=a.data.length);var l=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(n)e.postMessage({results:a,workerId:o.WORKER_ID,finished:l});else if(x(this._config.chunk)&&!i){if(this._config.chunk(a,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);a=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(a.data),this._completeResults.errors=this._completeResults.errors.concat(a.errors),this._completeResults.meta=a.meta),this._completed||!l||!x(this._config.complete)||a&&a.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),l||a&&a.meta.paused||this._nextChunk(),a}this._halted=!0},this._sendError=function(t){x(this._config.error)?this._config.error(t):n&&this._config.error&&e.postMessage({workerId:o.WORKER_ID,error:t,finished:!1})}}function l(t){var e;(t=t||{}).chunkSize||(t.chunkSize=o.RemoteChunkSize),h.call(this,t),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),i||(e.onload=w(this._chunkLoaded,this),e.onerror=w(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var n in t)e.setRequestHeader(n,t[n])}this._config.chunkSize&&e.setRequestHeader("Range","bytes="+this._start+"-"+(this._start+this._config.chunkSize-1));try{e.send(this._config.downloadRequestBody)}catch(t){this._chunkError(t.message)}i&&0===e.status&&this._chunkError()}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(t){var e=t.getResponseHeader("Content-Range");return null===e?-1:parseInt(e.substring(e.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){this._sendError(new Error(e.statusText||t))}}function c(t){var e,i;(t=t||{}).chunkSize||(t.chunkSize=o.LocalChunkSize),h.call(this,t);var n="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,i=t.slice||t.webkitSlice||t.mozSlice,n?((e=new FileReader).onload=w(this._chunkLoaded,this),e.onerror=w(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var r=Math.min(this._start+this._config.chunkSize,this._input.size);t=i.call(t,this._start,r)}var s=e.readAsText(t,this._config.encoding);n||this._chunkLoaded({target:{result:s}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function d(t){var e;h.call(this,t=t||{}),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t,i=this._config.chunkSize;return i?(t=e.substring(0,i),e=e.substring(i)):(t=e,e=""),this._finished=!e,this.parseChunk(t)}}}function u(t){h.call(this,t=t||{});var e=[],i=!0,n=!1;this.pause=function(){h.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){h.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){n&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):i=!0},this._streamData=w(function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}},this),this._streamError=w(function(t){this._streamCleanUp(),this._sendError(t)},this),this._streamEnd=w(function(){this._streamCleanUp(),n=!0,this._streamData("")},this),this._streamCleanUp=w(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function p(t){var e,i,n,r=Math.pow(2,53),s=-r,a=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)(e[-+]?\d+)?\s*$/,h=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,l=this,c=0,d=0,u=!1,p=!1,f=[],y={data:[],errors:[],meta:{}};if(x(t.step)){var v=t.step;t.step=function(e){if(y=e,C())_();else{if(_(),0===y.data.length)return;c+=e.data.length,t.preview&&c>t.preview?i.abort():(y.data=y.data[0],v(y,l))}}}function w(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function _(){if(y&&n&&(E("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+o.DefaultDelimiter+"'"),n=!1),t.skipEmptyLines)for(var e=0;e<y.data.length;e++)w(y.data[e])&&y.data.splice(e--,1);return C()&&function(){if(y)if(Array.isArray(y.data[0])){for(var e=0;C()&&e<y.data.length;e++)y.data[e].forEach(i);y.data.splice(0,1)}else y.data.forEach(i);function i(e,i){x(t.transformHeader)&&(e=t.transformHeader(e,i)),f.push(e)}}(),function(){if(!y||!t.header&&!t.dynamicTyping&&!t.transform)return y;function e(e,i){var n,r=t.header?{}:[];for(n=0;n<e.length;n++){var s=n,o=e[n];t.header&&(s=n>=f.length?"__parsed_extra":f[n]),t.transform&&(o=t.transform(o,s)),o=S(s,o),"__parsed_extra"===s?(r[s]=r[s]||[],r[s].push(o)):r[s]=o}return t.header&&(n>f.length?E("FieldMismatch","TooManyFields","Too many fields: expected "+f.length+" fields but parsed "+n,d+i):n<f.length&&E("FieldMismatch","TooFewFields","Too few fields: expected "+f.length+" fields but parsed "+n,d+i)),r}var i=1;return!y.data.length||Array.isArray(y.data[0])?(y.data=y.data.map(e),i=y.data.length):y.data=e(y.data,0),t.header&&y.meta&&(y.meta.fields=f),d+=i,y}()}function C(){return t.header&&0===f.length}function S(e,i){return n=e,t.dynamicTypingFunction&&void 0===t.dynamicTyping[n]&&(t.dynamicTyping[n]=t.dynamicTypingFunction(n)),!0===(t.dynamicTyping[n]||t.dynamicTyping)?"true"===i||"TRUE"===i||"false"!==i&&"FALSE"!==i&&(function(t){if(a.test(t)){var e=parseFloat(t);if(s<e&&e<r)return!0}return!1}(i)?parseFloat(i):h.test(i)?new Date(i):""===i?null:i):i;var n}function E(t,e,i,n){var r={type:t,code:e,message:i};void 0!==n&&(r.row=n),y.errors.push(r)}this.parse=function(r,s,a){if(t.newline||(t.newline=function(t,e){t=t.substring(0,1048576);var i=new RegExp(g(e)+"([^]*?)"+g(e),"gm"),n=(t=t.replace(i,"")).split("\r"),r=t.split("\n");if(1===n.length||1<r.length&&r[0].length<n[0].length)return"\n";for(var s=0,o=0;o<n.length;o++)"\n"===n[o][0]&&s++;return s>=n.length/2?"\r\n":"\r"}(r,t.quoteChar||'"')),n=!1,t.delimiter)x(t.delimiter)&&(t.delimiter=t.delimiter(r),y.meta.delimiter=t.delimiter);else{var h=function(e,i,n,r,s){var a,h,l,c;s=s||[",","\t","|",";",o.RECORD_SEP,o.UNIT_SEP];for(var d=0;d<s.length;d++){var u=s[d],p=0,g=0,f=0;l=void 0;for(var y=new m({comments:r,delimiter:u,newline:i,preview:10}).parse(e),v=0;v<y.data.length;v++)if(n&&w(y.data[v]))f++;else{var b=y.data[v].length;g+=b,void 0!==l?0<b&&(p+=Math.abs(b-l),l=b):l=b}0<y.data.length&&(g/=y.data.length-f),(void 0===h||p<=h)&&(void 0===c||c<g)&&1.99<g&&(h=p,a=u,c=g)}return{successful:!!(t.delimiter=a),bestDelimiter:a}}(r,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);h.successful?t.delimiter=h.bestDelimiter:(n=!0,t.delimiter=o.DefaultDelimiter),y.meta.delimiter=t.delimiter}var l=b(t);return t.preview&&t.header&&l.preview++,e=r,i=new m(l),y=i.parse(e,s,a),_(),u?{meta:{paused:!0}}:y||{meta:{paused:!1}}},this.paused=function(){return u},this.pause=function(){u=!0,i.abort(),e=x(t.chunk)?"":e.substring(i.getCharIndex())},this.resume=function(){l.streamer._halted?(u=!1,l.streamer.parseChunk(e,!0)):setTimeout(l.resume,3)},this.aborted=function(){return p},this.abort=function(){p=!0,i.abort(),y.meta.aborted=!0,x(t.complete)&&t.complete(y),e=""}}function g(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(t){var e,i=(t=t||{}).delimiter,n=t.newline,r=t.comments,s=t.step,a=t.preview,h=t.fastMode,l=e=void 0===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(l=t.escapeChar),("string"!=typeof i||-1<o.BAD_DELIMITERS.indexOf(i))&&(i=","),r===i)throw new Error("Comment character same as delimiter");!0===r?r="#":("string"!=typeof r||-1<o.BAD_DELIMITERS.indexOf(r))&&(r=!1),"\n"!==n&&"\r"!==n&&"\r\n"!==n&&(n="\n");var c=0,d=!1;this.parse=function(t,o,u){if("string"!=typeof t)throw new Error("Input must be a string");var p=t.length,m=i.length,f=n.length,y=r.length,v=x(s),b=[],w=[],_=[],C=c=0;if(!t)return F();if(h||!1!==h&&-1===t.indexOf(e)){for(var S=t.split(n),E=0;E<S.length;E++){if(c+=(_=S[E]).length,E!==S.length-1)c+=n.length;else if(u)return F();if(!r||_.substring(0,y)!==r){if(v){if(b=[],T(_.split(i)),U(),d)return F()}else T(_.split(i));if(a&&a<=E)return b=b.slice(0,a),F(!0)}}return F()}for(var k=t.indexOf(i,c),M=t.indexOf(n,c),I=new RegExp(g(l)+g(e),"g"),A=t.indexOf(e,c);;)if(t[c]!==e)if(r&&0===_.length&&t.substring(c,c+y)===r){if(-1===M)return F();M=t.indexOf(n,c=M+f),k=t.indexOf(i,c)}else{if(-1!==k&&(k<M||-1===M)){if(!(k<A)){_.push(t.substring(c,k)),k=t.indexOf(i,c=k+m);continue}var O=V(k,A,M);if(O&&void 0!==O.nextDelim){A=O.quoteSearch,_.push(t.substring(c,k=O.nextDelim)),k=t.indexOf(i,c=k+m);continue}}if(-1===M)break;if(_.push(t.substring(c,M)),N(M+f),v&&(U(),d))return F();if(a&&b.length>=a)return F(!0)}else for(A=c,c++;;){if(-1===(A=t.indexOf(e,A+1)))return u||w.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:b.length,index:c}),D();if(A===p-1)return D(t.substring(c,A).replace(I,e));if(e!==l||t[A+1]!==l){if(e===l||0===A||t[A-1]!==l){-1!==k&&k<A+1&&(k=t.indexOf(i,A+1)),-1!==M&&M<A+1&&(M=t.indexOf(n,A+1));var P=B(-1===M?k:Math.min(k,M));if(t[A+1+P]===i){_.push(t.substring(c,A).replace(I,e)),t[c=A+1+P+m]!==e&&(A=t.indexOf(e,c)),k=t.indexOf(i,c),M=t.indexOf(n,c);break}var L=B(M);if(t.substring(A+1+L,A+1+L+f)===n){if(_.push(t.substring(c,A).replace(I,e)),N(A+1+L+f),k=t.indexOf(i,c),A=t.indexOf(e,c),v&&(U(),d))return F();if(a&&b.length>=a)return F(!0);break}w.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:b.length,index:c}),A++}}else A++}return D();function T(t){b.push(t),C=c}function B(e){var i=0;if(-1!==e){var n=t.substring(A+1,e);n&&""===n.trim()&&(i=n.length)}return i}function D(e){return u||(void 0===e&&(e=t.substring(c)),_.push(e),c=p,T(_),v&&U()),F()}function N(e){c=e,T(_),_=[],M=t.indexOf(n,c)}function F(t){return{data:b,errors:w,meta:{delimiter:i,linebreak:n,aborted:d,truncated:!!t,cursor:C+(o||0)}}}function U(){s(F()),b=[],w=[]}function V(n,r,s){var o={nextDelim:void 0,quoteSearch:void 0},a=t.indexOf(e,r+1);if(r<n&&n<a&&(a<s||-1===s)){var h=t.indexOf(i,a);if(-1===h)return o;a<h&&(a=t.indexOf(e,a+1)),o=V(h,a,s)}else o={nextDelim:n,quoteSearch:r};return o}},this.abort=function(){d=!0},this.getCharIndex=function(){return c}}function f(t){var e=t.data,i=r[e.workerId],n=!1;if(e.error)i.userError(e.error,e.file);else if(e.results&&e.results.data){var s={abort:function(){n=!0,y(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:v,resume:v};if(x(i.userStep)){for(var o=0;o<e.results.data.length&&(i.userStep({data:e.results.data[o],errors:e.results.errors,meta:e.results.meta},s),!n);o++);delete e.results}else x(i.userChunk)&&(i.userChunk(e.results,s,e.file),delete e.results)}e.finished&&!n&&y(e.workerId,e.results)}function y(t,e){var i=r[t];x(i.userComplete)&&i.userComplete(e),i.terminate(),delete r[t]}function v(){throw new Error("Not implemented.")}function b(t){if("object"!=typeof t||null===t)return t;var e=Array.isArray(t)?[]:{};for(var i in t)e[i]=b(t[i]);return e}function w(t,e){return function(){t.apply(e,arguments)}}function x(t){return"function"==typeof t}return n&&(e.onmessage=function(t){var i=t.data;if(void 0===o.WORKER_ID&&i&&(o.WORKER_ID=i.workerId),"string"==typeof i.input)e.postMessage({workerId:o.WORKER_ID,results:o.parse(i.input,i.config),finished:!0});else if(e.File&&i.input instanceof File||i.input instanceof Object){var n=o.parse(i.input,i.config);n&&e.postMessage({workerId:o.WORKER_ID,results:n,finished:!0})}}),(l.prototype=Object.create(h.prototype)).constructor=l,(c.prototype=Object.create(h.prototype)).constructor=c,(d.prototype=Object.create(d.prototype)).constructor=d,(u.prototype=Object.create(h.prototype)).constructor=u,o})?n.apply(e,[]):n)||(t.exports=r)},Xljc:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.EOL="\r\n",t.BOM="\ufeff",t.DEFAULT_FIELD_SEPARATOR=",",t.DEFAULT_DECIMAL_SEPARATOR=".",t.DEFAULT_QUOTE='"',t.DEFAULT_SHOW_TITLE=!1,t.DEFAULT_TITLE="My Generated Report",t.DEFAULT_FILENAME="generated",t.DEFAULT_SHOW_LABELS=!1,t.DEFAULT_USE_TEXT_FILE=!1,t.DEFAULT_USE_BOM=!0,t.DEFAULT_HEADER=[],t.DEFAULT_KEYS_AS_HEADERS=!1,t}();e.CsvConfigConsts=n,e.ConfigDefaults={filename:n.DEFAULT_FILENAME,fieldSeparator:n.DEFAULT_FIELD_SEPARATOR,quoteStrings:n.DEFAULT_QUOTE,decimalSeparator:n.DEFAULT_DECIMAL_SEPARATOR,showLabels:n.DEFAULT_SHOW_LABELS,showTitle:n.DEFAULT_SHOW_TITLE,title:n.DEFAULT_TITLE,useTextFile:n.DEFAULT_USE_TEXT_FILE,useBom:n.DEFAULT_USE_BOM,headers:n.DEFAULT_HEADER,useKeysAsHeaders:n.DEFAULT_KEYS_AS_HEADERS};var r=function(){function t(t){this._csv="",this._options=h({},e.ConfigDefaults,t||{}),this._options.useKeysAsHeaders&&this._options.headers&&this._options.headers.length>0&&console.warn("Option to use object keys as headers was set, but headers were still passed!")}return Object.defineProperty(t.prototype,"options",{get:function(){return this._options},set:function(t){this._options=h({},e.ConfigDefaults,t)},enumerable:!0,configurable:!0}),t.prototype.generateCsv=function(t,e){if(void 0===e&&(e=!1),this._csv="",this._parseData(t),this._options.useBom&&(this._csv+=n.BOM),this._options.showTitle&&(this._csv+=this._options.title+"\r\n\n"),this._getHeaders(),this._getBody(),""!=this._csv){if(e)return this._csv;var i=this._options.useTextFile?".txt":".csv",r=new Blob([this._csv],{type:"text/"+(this._options.useTextFile?"plain":"csv")+";charset=utf8;"});if(navigator.msSaveBlob){var s=this._options.filename.replace(/ /g,"_")+i;navigator.msSaveBlob(r,s)}else{encodeURI(this._csv);var o=document.createElement("a");o.href=URL.createObjectURL(r),o.setAttribute("visibility","hidden"),o.download=this._options.filename.replace(/ /g,"_")+i,document.body.appendChild(o),o.click(),document.body.removeChild(o)}}else console.log("Invalid data")},t.prototype._getHeaders=function(){if(this._options.showLabels||this._options.useKeysAsHeaders){var t=this._options.useKeysAsHeaders?Object.keys(this._data[0]):this._options.headers;if(t.length>0){for(var e="",i=0;i<t.length;i++)e+=t[i]+this._options.fieldSeparator;e=e.slice(0,-1),this._csv+=e+n.EOL}}},t.prototype._getBody=function(){for(var t=Object.keys(this._data[0]),e=0;e<this._data.length;e++){for(var i="",r=0;r<t.length;r++)i+=this._formatData(this._data[e][t[r]])+this._options.fieldSeparator;i=i.slice(0,-1),this._csv+=i+n.EOL}},t.prototype._formatData=function(t){return"locale"===this._options.decimalSeparator&&this._isFloat(t)?t.toLocaleString():"."!==this._options.decimalSeparator&&this._isFloat(t)?t.toString().replace(".",this._options.decimalSeparator):"string"==typeof t?(t=t.replace(/"/g,'""'),(this._options.quoteStrings||t.indexOf(",")>-1||t.indexOf("\n")>-1||t.indexOf("\r")>-1)&&(t=this._options.quoteStrings+t+this._options.quoteStrings),t):"boolean"==typeof t?t?"TRUE":"FALSE":t},t.prototype._isFloat=function(t){return+t===t&&(!isFinite(t)||Boolean(t%1))},t.prototype._parseData=function(t){return this._data="object"!=typeof t?JSON.parse(t):t,this._data},t}();e.ExportToCsv=r;var s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function h(t){for(var e,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];for(var r,h=a(t),l=1;l<arguments.length;l++){for(var c in e=Object(arguments[l]))s.call(e,c)&&(h[c]=e[c]);if(Object.getOwnPropertySymbols){r=Object.getOwnPropertySymbols(e);for(var d=0;d<r.length;d++)o.call(e,r[d])&&(h[r[d]]=e[r[d]])}}return h}},YuTi:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}}}]);